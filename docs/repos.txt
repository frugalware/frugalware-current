= Handling darcs repositories

== Introduction

This document is for developers who want to publish a darcs repo on the
Frugalware FTP Server and on the Frugalware Darcsweb Interface.

== Location of the repo

Since a repo consists of plain files, we can and should place them on the ftp
server (/home/ftp). To prevent further problems, always use the server name
"darcs.frugalware.org", currently it's an alias of genesis.frugalware.org.

First decide if it's a personal repo or a team one. For example if you create a
repo to update to a newer python version, then probably you will do all the
work, create it under /pub/other/people/nick/reponame. Simply create a dir and
issue "darcs init".

Now anyone can "darcs get" it, using a "full mirror", for example
ftp://ftp5.frugalware.org/packages/frugalware/.

== Registering for the darcsweb interface

If the repo is a team one, then create it under /pub/other. In this case
probably you want the darcsweb interface, too. To use it:

. Create the file _darcs/third_party/darcsweb/desc inside the repo with a short
(less than 80 chars) description.

. Create a _relative_ symlink to /pub/other/homepage-ng/darcs/repos.

After some time (max 30 mins) it should appear at http://darcs.frugalware.org/

== Enabling hooks for your repo

If you want email sending to the Frugalware-darcs list and you want CIA
notifications for each patch, put

--------------------------------------------------------------------
apply posthook python /home/ftp/pub/other/darcs-hooks/darcs-hooks.py
apply run-posthook
--------------------------------------------------------------------

to _darcs/prefs/defaults.
