= Upgrading from Frugalware 1.4 to 1.5

== Preamble

The aim of this howto is to show how you can upgrade a Frugalware-1.4
(Nexon) system to Frugalware-1.5 (Mores).

== pacman-g2

The new release comes with an improved pacman-g2, which stores the
available package versions in a compressed format. Upgrade pacman-g2 and
use the *new* pacman-g2 to download the database in the new format:

----
# pacman-g2 -Sy pacman-g2
# pacman-g2 -Sy
-----

== systemd

The default init system is systemd on new installs. You need to manually
replace it when you upgrade:

----
# pacman-g2 -Sy systemd
----

== plymouth

Splashy, the old boot splash implementation has been replaced with
plymouth. Splashy could be disabled by the `nosplashy` kernel parameter.
This has been changed, now a vanilla kernel command-line does not start a
boot splash, and you need the `splash` kernel parameter to have plymouth
on boot. Update `/boot/grub/menu.lst` accordingly.

== samba

The new release comes with a new version of samba. From this version the
package does NOT contain mount.smb, smbmnt and smbmount binaries, so in the
file /etc/fstab the `smb` filesystem type has to be changed to `cifs`.

== Akonadi

Akonadi was build to use SQLite by default for any new user. Current config
files for existing users will not be touched though. If you want you can
manually change the config file: `~/.config/akonadi/akonadiserverrc`.

WARNING: Changing this means any data will remain in the previous
database (`mysql`). If you still want to proceed just modify to:

----
Driver=QSQLITE3
----

== Removing obsolete packages

Some software has been marked as obsolete in the new release. To remove
them:

----
# pacman-g2 -Rd gst-plugins-bad-alsa gst-plugins-bad-jack gst-plugins-bad-metadata
----

== Upgrading the system

Now it's time to upgrade the system itself:

----
# pacman-g2 -Su
:: Starting local database upgrade...
----

You will be asked to replace some packages automatically.  These are
normal and you are expected to answer 'Y' to these questions (or just
hit ENTER).

After this, the list of to-be-upgraded packages is displayed. Just hit
enter and wait. Make some tea, it can take a while. :-)

== Updating config files

`pacman-g2` does not touch configuration files in case you customized
them. You should run

----
# find /etc -name '*.pacnew'
----

and update each configuration file based on the `.pacnew` version. Once
you're done with one, you should remove the `.pacnew` file.

== The reboot

Since the kernel is upgraded, too, you have to reboot your machine.

Done!
