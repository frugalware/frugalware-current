# Last Modified: Wed, 05 Apr 2006 19:13:27 +0200
# Compiling Time: ~0.22 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=kchmviewer
pkgver=2.5
pkgrel=1
pkgdesc="A viewer of CHM (MS-Help) files"
url="http://kchmviewer.sourceforge.net/"
depends=('kdebase' 'chmlib')
groups=('kde-extra')
archs=('i686' 'x86_64')
up2date='lynx -dump "http://sourceforge.net/project/showfiles.php?group_id=135500" | grep "kchmviewer-\([0-9.]\+\).tar.gz" | head -n 1 | sed "s/.*kchmviewer-\([0-9.]\+\).tar.gz.*/\1/"'
source=(http://heanet.dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz \
	01-iconstorage_gcc41.patch)
license=("GPL2")
sha1sums=('f77574cbbc2aaf277a030cf4808cf24e4c016a42' \
          '1fcea51ec6367153b1e7edd05956aa4382729ce8')

build()
{

	Fbuild --with-kde --disable-dependency-tracking \
		--disable-debug --without-debug --with-gnu-ld \
		--enable-final
	Fmkdir /usr/share/icons/hicolor/{48x48,64x64,128x128}/apps
	Ffilerel src/pics/cr48-app-kchmviewer.png /usr/share/icons/hicolor/48x48/apps/kchmviewer.png
	Ffilerel src/pics/cr64-app-kchmviewer.png /usr/share/icons/hicolor/64x64/apps/kchmviewer.png
	Ffilerel src/pics/cr128-app-kchmviewer.png /usr/share/icons/hicolor/128x128/apps/kchmviewer.png
}

# optimalization ok
