# Last Modified: Fri, 09 Dec 2005 15:28:37 +0100
# Compiling Time: ~0.04 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=libmpeg3
pkgver=1.5.4
pkgrel=2
pkgdesc="a MPEG encoder written in C and based on libfame, which is supposed to be fast."
url="http://www.heroinewarriors.com/"
depends=('a52dec' 'mpeg2dec')
makedepends=('nasm')
groups=('lib-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=13554 | egrep '$pkgname-[0-9\.]*-' | head -n 1 | sed 's/.*$pkgname-\([0-9\.]*\)-src.tar.bz2.*/\1/'"
source=(http://heanet.dl.sourceforge.net/sourceforge/heroines/$pkgname-$pkgver-src.tar.bz2 \
	libmpeg3-big.patch)
md5sums=('7adfc9c0beea2134575137f2e0d2ef11' '07cbf470e9417d896cc0ec47c0a7bcc5')
license="GPL2"
[ "$CARCH" != "x86_64" ] && mmx=" --enable-mmx"

build() {
	Fcd
	Fpatchall
	# Need for proper automake run
	touch {NEWS,README,AUTHORS,ChangeLog}
	# Need for a small fix in headers. (Those fixes needed at package time)
	ln -s . libmpeg3
	libtoolize -f -c
	Fautoconfize
	chmod +x strip_fPIC.sh
	# We removed this after autoconfize, then we did not got any 0 bytes packages in .../doc
	rm -rf {NEWS,README,AUTHORS,ChangeLog}
	Fmake $mmx
	Fmakeinstall
}

# optimalization OK

# vim: ft=sh
