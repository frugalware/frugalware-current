# Last Modified: Tue, 06 Sep 2005 18:08:49 +0200
# Compiling Time: 17 sec
# Maintainer: Zoltan Kiss <djsmiley@inflame.hu>

pkgname=munin-node
pkgver=1.2.3
pkgrel=1
pkgdesc="Munin is a tool for graphing all sorts of information about one or more servers and displaying it in a web interface. (Node)"
url="http://munin.projects.linpro.no/"
depends=('perl-net-server')
groups=('network-extra')
archs=('i686')
up2date="lynx -dump $url|grep 'Stable'|sed 's/.*: \(.*\)\ .*D.*/\1/'"
source=(http://puzzle.dl.sourceforge.net/sourceforge/munin/munin_$pkgver.tar.gz Makefile.config rc.munin-node munin-node.logrotate)
sha1sums=('ed9a556a7540fb93c5c8d504c595af631e9ec80f' \
	  '2a673dd3cc2765a430d42d3d99acec8dd52beb6f' \
	  'e2bed01c7fa552820fc83f6ca66a81600b18cf27' \
	  '2950e0a37d42abb2b152a40f24498982613a4b62')
			      
build()
{
	Fcd munin-$pkgver
	cp -f $Fsrcdir/Makefile.config ./
	make install-node DESTDIR=$Fdestdir
	make install-node-plugins DESTDIR=$Fdestdir

	Ffile etc/logrotate.d/munin-node.logrotate
	Fmv etc/logrotate.d/munin-node.logrotate etc/logrotate.d/munin-node

	Frcd munin-node

	Fsed "$Fdestdir" "" $Fdestdir/etc/munin/munin-node.conf
	Fsed "$Fdestdir" "" $Fdestdir/usr/sbin/munin-node
	Fsed "$Fdestdir" "" $Fdestdir/usr/sbin/munin-node-configure
	Fsed "$Fdestdir" "" $Fdestdir/usr/sbin/munin-node-configure-snmp
	Fsed "$Fdestdir" "" $Fdestdir/usr/sbin/munin-run
}

# optimalization OK

# vim: ft=sh
