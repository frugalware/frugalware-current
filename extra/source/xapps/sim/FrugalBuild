# Last Modified: Sun, 14 Aug 2005 22:18:42 +0200
# Compiling Time: ~3.12 SBU
# Maintainer: BMH1980 <bmh1980@frugalware.org>

pkgname=sim
pkgver=0.9.3_2
realver=`echo $pkgver | tr _ -`
shortver=`echo $pkgver | cut -d _ -f 1`
pkgrel=3
pkgdesc="Plugins-based instant messenger with support various protocols."
url="http://sim-icq.sourceforge.net/"
license="GPL2"
up2date="lynx -dump $url/download.shtml | grep -m 1 .tar.gz | cut -d ']' -f 2 | sed 's|sim-||' | sed 's|.tar.gz||' | tr - _"
source=(http://dl.sourceforge.net/sourceforge/sim-icq/$pkgname-$realver.tar.gz \
	01-sim-0.9.3-amd64gcc4fix-part01.patch sim-amd64-gcc4fix.patch)
sha1sums=('ccb1ecf2def4dfaf3a3990b46d3744725fdb9715' \
          '561e09130116724ba97e3433d0fe59897542fda7' \
          'e2f0619ef0c3cb829507b389126cdaecf655f301')
groups=('xapps-extra')
archs=('i686' 'x86_64')
depends=('kdelibs' 'openssl' 'qt')
install=$pkgname.install

build()
{
	Fcd $pkgname-$shortver
	[ "$CARCH" == "x86_64" ] && Fpatch 01-sim-0.9.3-amd64gcc4fix-part01.patch
	[ "$CARCH" == "x86_64" ] && Fpatch sim-amd64-gcc4fix.patch
	Fmake
	Fmakeinstall
	# removing Mandrakes menu entry and duplicated mime entry
	Frm /usr/lib/menu /usr/share/mimelnk
	Fsed "^Comment\[de\]=" "Comment\[de\]=ICQ-Client" $Fdestdir/usr/share/applnk/Internet/sim.desktop
	Fsed "\[ru\]" "\[hu\]" $Fdestdir/usr/share/applnk/Internet/sim.desktop
	Fsed "^Comment\[hu\]=" "Comment\[hu\]=ICQ kliens" $Fdestdir/usr/share/applnk/Internet/sim.desktop
}

# optimalization ok - i686

# vim: ft=sh
