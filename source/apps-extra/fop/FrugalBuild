# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=fop
pkgver=0.20.5
pkgrel=3
pkgdesc="Formatting Objects Processor is a print formatter driven by XSL"
url="http://xmlgraphics.apache.org/fop/"
rodepends=('j2re' 'xml-commons-external')
groups=('apps-extra')
archs=('i686' 'x86_64')
# it may be weird to use 'previous', but in fact it seem to be still more
# stable then the newer 0.9x releases, which are marked as stable by upstream.
# use fop-devel if you need that branch
up2date="lynx -dump $url/compliance.html|grep '(previous)'|sed 's/.* \(.*\) (previous).*/\1/;q'"
# TODO: build it from source
source=(http://archive.apache.org/dist/xml/fop/fop-$pkgver-bin.tar.gz)
signatures=($source.asc)

build()
{
	Fsed 'build/' '' fop.sh
	sed '2itest "$FOP_HOME" || FOP_HOME=/usr/share/java/' fop.sh > fop
	Fexerel /usr/bin/fop
	Fln fop /usr/bin/fop.sh
	Ffilerel lib/*.jar build/*.jar /usr/share/java/
	Frm /usr/share/java/xml-apis.jar
}
