# Compiling Time: 0 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=fwupd
pkgver=1.5.4
pkgrel=1
pkgdesc='A simple daemon to allow session software to update firmware'
archs=('x86_64')
depends=('appstream-glib' 'libarchive' 'fwupdate' 'gpgme' 'colord' 'libsmbios' \
	'gsettings-desktop-schemas' 'gnu-efi' 'libxmlb>=0.2.0' 'tpm2-tss'\
	'efivar' 'libjcat')
makedepends=('meson' 'gobject-introspection' 'polkit' 'gcab' \
	'appstream-glib' 'gpgme' 'docbook-sgml-dtd-4.1' \
	'docbook-utils' 'perl-sgmlspm' 'docbook-xml' \
	'docbook-xsl' 'opensp' 'openjade' 'gtk-doc' \
	'x11-protos' 'python3-pygobject3' 'pygobject3-cairo' 'python3-pillow' \
	'python3-pycairo' 'dejavu-ttf' 'help2man' 'vala' \
	'systemd-devel' 'gettext' 'git')
groups=('apps-extra')
_F_github_author="hughsie"
_F_github_tag="yes"
_F_github_grepv="1.2.*\|1.3.*"
## can't use $pkgname since they use $libexec/$pkgname already
_F_meson_confopts+=" --libexecdir /usr/lib"
Finclude github meson
source=("https://people.freedesktop.org/~hughsient/releases/${pkgname}-${pkgver}.tar.xz")
signatures=("${source[0]}.asc")

options=('scriptlet')

replaces=('fwupdate')
provides=('fwupdate')
conflicts=('fwupdate')

build() {
	Meson_build
	Frm usr/lib/modules-load.d/fwupd-platform-integrity.conf
}


# optimization OK
