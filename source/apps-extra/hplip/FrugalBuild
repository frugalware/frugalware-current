# Compiling Time: 0.46 SBU
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=hplip
pkgver=1.7.4
pkgrel=2
pkgextraver=a
_F_sourceforge_ext=$pkgextraver.tar.gz
Finclude sourceforge
pkgdesc="HPLIP is an HP developed solution for printing, scanning, and faxing with HP inkjet and laser based printers in Linux."
url="http://hplip.sourceforge.net/"
depends=('net-snmp>=5.4' 'libusb' 'cups' 'zlib')
rodepends=('espgs')
conflicts=('hpijs')
provides=('hpijs')
groups=('apps-extra')
archs=('i686' 'x86_64')
source=(${source[@]} rc.$pkgname rc.$pkgname-hu.po)
up2date="lynx -dump $url |grep version |sed -e 's/.*ion \(.*\)/\1/' |sed s/$pkgextraver//"

build() {
	Fbuild

	# sane-backends
	Frm /etc/sane.d

	# init fix
	Frm /etc/init.d
	Frcd2

	# foomatic-filters
	Frm /usr/bin/foomatic-rip
	Frm /usr/lib/cups/filter/foomatic-rip

	# otherwise cups doesn't see it
	Fmkdir /usr/share/cups/model
	Fmv '/usr/share/ppd/*' /usr/share/cups/model
	Frm /usr/share/ppd
	Fln cups/model /usr/share/ppd
	Fsed "ppd=/usr/share/ppd/HP" "ppd=/usr/share/cups/model/HP" $Fdestdir/etc/hp/$pkgname.conf
}
sha1sums=('98fcb0ce13ee7d9f17cc6c61c568528dd9cbf71d'\
          '1104b0e9c0686e8644d76ae1099f392b4d0b367e'\
          '8553e6983843b9ba54393612e84587310abfa804')

# optimization OK
