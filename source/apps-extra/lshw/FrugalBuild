# Compiling Time: 0.4 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Contributor: BMH1980 <bmh1980@frugalware.org>

pkgname=lshw
pkgver=B.02.14
pkgrel=1
pkgdesc="A tool to provide information on the hardware configuration of the machine."
url="http://ezix.org/project/wiki/HardwareLiSter"
license="GPL2"
groups=('apps-extra')
archs=('i686' 'x86_64')
makedepends=('gtk+2')
options=('scriptlet')
depends=('libstdc++')
up2date="lynx -dump $url|grep -m 1 latest|grep -o '[A-Z][0-9\.]\+[0-9]'"
source=(http://ezix.org/software/files/$pkgname-$pkgver.tar.gz gcc43_fix.patch)

subpkgs=("gtk-$pkgname")
subdescs=("Gtk+2 frontend for lshw")
sublicense=("GPL2")
subgroups=('xapps-extra')
subdepends=('gtk+2')
subarchs=('i686 x86_64')

build() {
	for i in `find . -name Makefile` ; do
		sed -i -e "s|DESTDIR?=/|DESTDIR=$Fdestdir|" \
		       -e "s|SBINDIR=\$(PREFIX)/sbin|SBINDIR=\$(PREFIX)/bin|" \
		       -e "s|^CXXFLAGS=.*|&$CXXFLAGS|" $i || Fdie
	done
	# What.. install wants to strip a directory ...
	Fsed "-p -s" "-p" src/Makefile
	Fpatch gcc43_fix.patch
	Fmake
	Fmakeinstall
	Fmake gui
	Fmakeinstall install-gui
	Fdocrel docs/*
	Fmkdir /usr/share/doc/${subpkgs[0]}-$pkgver
	Ffilerel COPYING README docs/* /usr/share/doc/${subpkgs[0]}-$pkgver/
	Fsplit ${subpkgs[0]} usr/bin/${subpkgs[0]} usr/share/$pkgname/artwork
	Fsplit ${subpkgs[0]} usr/share/doc/${subpkgs[0]}-$pkgver
}

sha1sums=('39d61aa218e0a8558417c7f95dcca90bad3d11c1' \
          '78a7882ba531f41c73383977000c63520056bad2')

# optimization OK
