# Compiling Time: ~0.1 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: voroskoi <voroskoi@frugalware.org>

pkgname=pinentry
pkgver=1.3.0
pkgrel=2
pkgdesc="Applications for entering PINs or Passphrases."
url="https://www.gnupg.org/ftp/gcrypt/pinentry/"
depends=('libsecret' 'glib2' 'libassuan')
makedepends=('x11-protos' 'gcr')
groups=('apps-extra')
archs=('x86_64')
Finclude texinfo kf5-version kf6-version
up2date="Flasttar $url"
source=($url/$pkgname-$pkgver.tar.bz2)
options=('scriptlet')
sha1sums=('28effa1722865786cb984f3099a32db40f96ea26')
Fconfopts="	--enable-pinentry-tty \
		--enable-pinentry-curses \
		--enable-fallback-curses \
		--enable-pinentry-gtk2 \
		--enable-pinentry-gnome3 \
		--enable-pinentry-qt \
		--enable-libsecret"

subpkgs=("$pkgname-gtk+2")
subdescs=("GTK+2 based Applications for entering PINs or Passphrases.")
subdepends=("gtk+2")
subrodepends=("$pkgname>=$pkgver")
subgroups=('xapps-extra')
subarchs=('x86_64')
subconflicts=("$pkgname-gtk+")
subreplaces=("$pkgname-gtk+")
subprovides=("$pkgname-gtk+")

subpkgs+=("$pkgname-qt5")
subdescs+=("Qt5 based Applications for entering PINs or Passphrases.")
subdepends+=("kwayland5>=$_F_kf5_full qt5-x11extras>=$_F_kdever_qt5")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xapps-extra')
subarchs+=('x86_64')
subconflicts+=("$pkgname-qt $pkgname-qt4")
subreplaces+=("$pkgname-qt $pkgname-qt4")
subprovides+=("$pkgname-qt $pkgname-qt4")

subpkgs+=("$pkgname-qt6")
subdescs+=("Qt6 based Applications for entering PINs or Passphrases.")
subdepends+=("qt6-base>=$_F_kdever_qt6 kguiaddons>=$_F_kf6_full \
	kwindowsystem>=$_F_kf6_full kwayland>=$_F_kf6_full")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xapps-extra')
subarchs+=('x86_64')
subconflicts+=("")
subreplaces+=("")
subprovides+=("")

subpkgs+=("$pkgname-fltk")
subdescs+=("FLTK based Applications for entering PINs or Passphrases.")
subdepends+=("fltk")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xapps-extra')
subarchs+=('x86_64')
subconflicts+=("")
subreplaces+=("")
subprovides+=("")

subpkgs+=("$pkgname-enlightment")
subdescs+=("Enlightment based Applications for entering PINs or Passphrases.")
subdepends+=("efl")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xapps-extra')
subarchs+=('x86_64')
subconflicts+=("")
subreplaces+=("")
subprovides+=("")

subpkgs+=("$pkgname-gnome")
subdescs+=("GNOME based Applications for entering PINs or Passphrases.")
subdepends+=("gcr")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xapps-extra')
subarchs+=('x86_64')
subconflicts+=("")
subreplaces+=("")
subprovides+=("")

build()
{
	Fbuild
	Fln pinentry-curses usr/bin/pinentry

	Fsplit pinentry-gtk+2 usr/bin/pinentry-gtk-2
	Fsplit pinentry-qt5 usr/bin/pinentry-qt5
	Fsplit pinentry-qt6 usr/bin/pinentry-qt

	Fsplit pinentry-gnome usr/bin/pinentry-gnome3
	Fsplit pinentry-fltk usr/bin/pinentry-fltk
	Fsplit pinentry-enlightment usr/bin/pinentry-efl

	# Compatibility
	Fln pinentry-gtk-2 usr/bin/pinentry-gtk
	Fsplit pinentry-gtk+2 usr/bin/pinentry-gtk
}

# optimization OK
