# Compiling Time: 1.35 SBU
# Maintainer: James Buren <ryuo@frugalware.org>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=gettext
pkgver=0.19.8.1
pkgrel=11
pkgdesc="GNU internationalization library"
url="http://www.gnu.org/software/gettext"
depends=('glibc>=2.29-5' 'libxml2>=2.9.9-3' 'ncurses>=6.1-5')
groups=('base' 'chroot-core')
archs=('x86_64')
Fup2gnugz
source=(ftp://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$pkgver.tar.gz \
	format-security.patch fix-its-segfault.patch)
sha1sums=('b5d24ba2958c91fc5cc0058165837c99a0f58784' \
          'd989d60bb104b86e3412d11d0d6943ca632ae3b2' \
          '944befd1f209e4718309d10bbf0980e2713b7403')
Fconfopts+=" --disable-csharp --enable-nls --with-xz --without-included-gettext"
_F_cross32_simple_auto="yes"
_F_cross32_delete=('usr/share/gettext' 'usr/share/gettext-*')
Finclude cross32

options+=('ldgold' 'nolto')

build() {

	# fixme , need patch
	# error: undefined reference to 'log10'
	#LDFLAGS+=" -lm"
	unset XZ_OPT
	export XZ_OPT=" -T 2"
	Fbuild_cross32
	## remove examples 8MB..
	Frm usr/share/doc/gettext-*/examples
}


# optimization OK
