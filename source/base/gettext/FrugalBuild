# Compiling Time: 1.35 SBU
# Maintainer: James Buren <ryuo@frugalware.org>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=gettext
pkgver=0.22.2
pkgrel=1
pkgdesc="GNU internationalization library"
url="http://www.gnu.org/software/gettext"
depends=('libcroco' 'ncurses>=6.1-5' 'libunistring>=1.1' 'icu4c>=71.1')
groups=('base' 'chroot-core')
archs=('x86_64')
Fup2gnugz
source=(ftp://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$pkgver.tar.gz)
sha1sums=('a95a6396b82b53f4674189cd9389eaa7fc5f448b')
Fconfopts+="	--enable-csharp \
		--enable-nls \
		--with-xz \
		--without-included-gettext"
options+=('ldgold')
_F_cross32_simple_auto="yes"
_F_cross32_delete=('usr/share/gettext' 'usr/share/gettext-*')
Finclude cross32
_F_cd_path="$pkgname-$pkgver"

build() {
	Fcross32_prepare
        Fcross32_copy_source
	Fcd
	Fexec cd gettext-runtime || Fdie
	Fbuild

        Fcross32_copy_back_source
        Fcross32_reset_and_fix

	Fcross32_delete_empty
	Fcross32_delete_static
	Fsplit "${subpkgs[0]}" /\*

	Fcd
	Fexec cd gettext-runtime || Fdie
	Fbuild

	## remove examples 8MB..
	Frm usr/share/doc/gettext-*/examples

	# meh
	Frm var/
}


# optimization OK
