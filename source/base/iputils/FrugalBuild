# Compiling Time: 0.03 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=iputils
pkgver=20190515
pkgrel=2
pkgdesc="The ping program for checking to see if network hosts are alive."
replaces=('netselect')
depends=('openssl>=1.1.1' 'libidn2' 'libcap')
makedepends=('docbook-xsl' 'libxslt' 'ninja' 'systemd')
groups=('base')
archs=('x86_64')
_F_github_tag=y
_F_github_ver="s$pkgver"
Finclude github meson
up2date="$up2date | sed 's/s//'"
source+=("fix-man-building.patch")
sha1sums=('0800e7d64edf0256169736cb1094282ddeb227ae' \
          '529c009e33cb6d1cefc8cbc1462560269c290de9')
options=('scriptlet')
_F_cd_path="$pkgname-s$pkgver"

build() {
	Meson_build
	Frm usr/share/man/man8/tftpd.8
	Frm etc/init.d
	# fix meson crap .. why peoples uses this shitty build system ?
	# OFC service files poiting usr/sbin/foo as it should ,
	# that whole meson is crap+junk*1000
	Fmkdir usr/sbin bin
	Fmv usr/bin/ping bin/ping
	Fmv usr/bin/* usr/sbin/
	Frm usr/bin
}

# optimization OK
