# Compiling Time: 0.06 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=kbd
pkgver=1.15.2
pkgrel=4
pkgdesc="Keyboard maps and console fonts"
url="ftp://ftp.altlinux.org/pub/people/legion/kbd/"
_F_archive_grepv="wip\|rc"
up2date="Flasttar $url"
depends=('sed>=4.1.5-3' 'bash')
groups=('base')
archs=('i686' 'x86_64' 'ppc')
backup=(etc/sysconfig/font)
source=($url/$pkgname-$pkgver.tar.gz \
	rc.font rc.font-{de,hu}.po rc.keymap rc.keymap-{de,hu}.po \
	font)
sha1sums=('6252a2bf6b897416719dc976e3ac26cf28e6e932' \
          '83e29b230f8b12abc6137387bb20bfd803bf1778' \
          '7b1e17e399608f54ff70ac22cf8e697e01ea6b23' \
          'd385735e880bea9f8444dfbc5144007eaaffee32' \
          'ddb2af28b950d816bf5ae7d1d121d59fb0f71cee' \
          'beceda61cdf168e4063873a9ea6312dbc8284613' \
          'b9c50c54c7f3b1efce7858a39b0dd7490cc742a3' \
          '7e2d97eeef740c7618d25a70e84b0b55fa6c1a09')

build()
{
	Fbuild --enable-optional-progs
	# init script
	Frcd2 font
	Frcd2 keymap
	# config
	Ffile /etc/sysconfig/font
	# don't run old sysv init script with different name when using systemd
	Fln systemd-initctl.service /lib/systemd/system/font.service
	Fln systemd-initctl.service /lib/systemd/system/keymap.service
}

# optimization OK
