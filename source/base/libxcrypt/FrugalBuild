# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=libxcrypt
pkgver=4.4.36
pkgrel=2
pkgdesc='Modern library for one-way hashing of passwords'
archs=('x86_64')
groups=('base' 'chroot-core')
depends=('glibc')
makedepends=('python3-passlib')
_F_github_author=besser82
_F_github_tag_prefix=v
Finclude github
source=("$url/releases/download/v${pkgver}/libxcrypt-$pkgver.tar.xz")
signatures=("${source[0]}.asc")
Fconfopts="	--enable-hashes=strong,glibc \
		--disable-failure-tokens"

subpkgs=('libxcrypt-compat')
subdescs=("$pkgdesc - glibc compat")
subgroups=('lib-extra')
subdepends=('glibc')
subrodepends=("$pkgname")

subarchs=('x86_64')
build() {
	Fcd
	Fpatchall
	Fmake --enable-obsolete-api=glibc
	Fmakeinstall
	Frm usr/lib/libxcrypt*
	Frm usr/lib/pkgconfig/
	Fsplit $pkgname-compat usr/lib

	Fexec make clean || Fdie
	Fmake --enable-obsolete-api=no
	Fmakeinstall
}


# optimization OK
