# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=lz4
pkgver=1.9.4
pkgrel=6
pkgdesc="Extremely Fast Compression algorithm"
url="http://www.lz4.org/"
groups=('base' 'core' 'chroot-core')
archs=('x86_64')
depends=('glibc>=2.35')
makedepends=('gcc')
_F_github_tag_v="yes"
_F_cross32_simple_auto="yes"
_F_cross32_delete=('usr/bin' 'usr/include')
_F_cross32_use_cmake=yes
_F_cmake_src_dir="build/cmake"
_F_cross32_cmake_confopts_64="	-DBUILD_STATIC_LIBS=ON"
Finclude github cross32
sha1sums=('1d262fd78a0dbaa409e764979c6a643d0370f8d1')
options+=('static' 'ldgold') ## pacman/libarchive >=3.2.1
_F_cd_path="$pkgname-$pkgver"

subpkgs+=("lib32-${pkgname}")
subdescs+=("$pkgdesc ( 32bit )")
subdepends+=("${_F_cross32_subdepends[*]}")
subgroups+=('lib32-extra')
subarchs+=('x86_64')
suboptions+=('')

subpkgs+=("${pkgname}-static")
subdescs+=("Static files for $pkgname")
subdepends+=('libstdc++>=12.2')
subgroups+=('devel-extra')
subarchs+=('x86_64')
suboptions+=('')

build() {
	Fbuild_cross32

	Fsplit ${pkgname}-static usr/lib/*.a
}

# optimization OK
