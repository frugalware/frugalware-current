#!/bin/sh

pre_sysupgrade() {
	/usr/bin/pacman-g2 -Qm > /tmp/old-foreign                                                                                                                                                                    
}

post_sysupgrade() {
	/usr/bin/pacman-g2 -Qm > /tmp/new-foreign
        if [ -f /tmp/new-foreign ]; then
                echo "Foreign or unmaintained packages found: check with -Qm"
	elif  [ $(/usr/bin/diff /tmp/old-foreign /tmp/new-foreign) ]; then
		echo "New packages not officialy supported found:"
		/usr/bin/comm -13 /tmp/old-foreign /tmp/new-foreign
	fi
	rm -f /tmp/old-foreign /tmp/new-foreign
}

op=$1
shift
$op $*
