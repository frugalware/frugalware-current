# Compiling Time: 0.70 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>

pkgname=xfsprogs
pkgver=4.5.0
pkgrel=2
pkgdesc="XFS filesystem-specific static libraries and headers."
url="http://xfs.org"
depends=('glibc>=2.22-14' 'libuuid>=2.28-2')
makedepends=('xfsprogs-attr>=2.4.47-4' 'e2fsprogs>=1.43.1-2' 'util-linux>=2.28-2')
groups=('base')
archs=('i686' 'x86_64' 'arm')
replaces=('xfsprogs-base')
up2date="Flasttar ftp://oss.sgi.com/projects/xfs/cmd_tars"
source=(ftp://oss.sgi.com/projects/xfs/cmd_tars/${pkgname}-${pkgver}.tar.gz \
	xfsprogs-4.3.0-sharedlibs.patch)
signatures=("${source[0]}.sig" '')

build() {
	unset MAKEFLAGS
	export DEBUG="-DNDEBUG"
	export OPTIMIZER="-O1"
	Fcd
	Fpatchall
	Fconf --bindir=/bin \
		--sbindir=/sbin \
		--libexecdir=/usr/lib \
		--enable-lib64=no \
		--libdir=/lib \
		--includedir=/usr/include \
		--datadir=/usr/share \
		--enable-static=no \
		--disable-static
	make || Fdie
	make -j1 DIST_ROOT=$Fdestdir install install-dev || Fdie
	## FIXME: makepkg need that funtion also
	Ffix_la_files
}

