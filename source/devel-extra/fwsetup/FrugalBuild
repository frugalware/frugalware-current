# Compiling Time: 0.38 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

USE_DEVEL=${USE_DEVEL:-"n"}

pkgname=fwsetup
pkgver=0.9.0
Fuse $USE_DEVEL && pkgver=0.8.8.9.gd348556
pkgrel=1
pkgdesc="Frugalware Setup"
url="http://ftp.frugalware.org/pub/other/setup/"
depends=()
makedepends=('dialog' 'parted' 'pacman-g2>=3.5.5' 'module-init-tools' 'frugalware>=0.9pre1' 'grub')
groups=('devel-extra')
archs=('i686' 'x86_64')
_F_archive_nosort=y
up2date="lynx -dump $url/releases/ |Flasttar"
if ! Fuse $USE_DEVEL; then
	source=($url/releases/$pkgname-$pkgver.tar.gz)
	signatures=("$source.asc")
else
	_F_scm_type="git"
	_F_scm_url="git://git.frugalware.org/pub/other/setup/setup"
	Finclude scm
fi
options=('nofakeroot')
unset MAKEFLAGS

build()
{
	if Fuse $USE_DEVEL; then
		rm -rf ~/git
		(mkdir -p ~/git; cd ~/git; git clone git://git.frugalware.org/pub/other/translations)
		Funpack_scm
		make prepare
	fi
	Fbuild --repo=testing --enable-usb --enable-tftp
}

# optimization OK
