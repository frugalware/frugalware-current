# Compiling Time: ~0.01 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=perl-mldbm
pkgver=2.01
pkgrel=1
pkgdesc="store multi-level hash structure in single level tied hash"
url="http://cpan.org/"
makedepends=('perl' 'perl-freezethaw')
depends=('perl' 'perl-freezethaw')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump 'http://search.cpan.org/~chamas/' |grep 'MLDBM-' |sed 's/.*MLDBM-\(.*\)\ store.*/\1/;q'"
source=(http://search.cpan.org/CPAN/authors/id/C/CH/CHAMAS/MLDBM-$pkgver.tar.gz)
sha1sums=('01e35634dee973d03a24cc8417587b2fbc5b39d3')

build() {
	cd $startdir/src/MLDBM-$pkgver
	perl Makefile.PL
	
	make || return 1
	make test
	
	make install DESTDIR=$startdir/pkg
	mv $startdir/pkg/usr/lib/perl5/site_perl/?.?.? \
		$startdir/pkg/usr/lib/perl5/site_perl/current
	rm -rf $startdir/pkg/usr/lib/perl5/?.?.?
	find $startdir/pkg/usr/lib/perl5/site_perl/current/ -name .packlist -exec rm {} \;
}

# optimalization OK

# vim: ft=sh
