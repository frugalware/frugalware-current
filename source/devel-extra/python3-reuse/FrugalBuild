# Compiling Time: 0.19 SBU
# Maintainer: DeX77 <dex+fw@dragonslave.de>

pkgname=python3-reuse
pkgver=4.0.3
pkgrel=1
pkgdesc="reuse is a tool for compliance with the REUSE recommendations."
depends=('python3-attrs' 'python3-binaryornot' 'python3-debian' \
	'python3-jinja' 'python3-license-expression' 'python3-tomlkit')
makedepends=('python3-build' 'python3-installer' 'python3-wheel' \
	'python3-poetry-core' 'python3-sphinx' 'python3-myst-parser' \
	'python3-sphinx-apidoc')
groups=('devel-extra')
archs=('x86_64')
_F_pypi_name=reuse
Finclude pypi
source+=(no-poetry-for-docs.patch)
sha1sums=('c0fc8affd766641152475fa57ee3463e901d1943' \
          '419829007f82ea46f063df77a00f3415f539a6cb')

build() {
        Fcd
	Fpatchall

        Fexec python3 -m build -wn || Fdie
	Fexec make -C docs man || Fdie
        Fexec python3 -m installer --destdir="$Fdestdir" dist/*.whl || Fdie
	Fmanrel ./docs/_build/man/*.1
}

# optimization OK
