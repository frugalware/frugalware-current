# Compiling Time: 0.33 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=rhino
pkgver=1_7R2
pkgrel=1
pkgdesc="An open-source implementation of JavaScript written in Java."
url="http://www.mozilla.org/rhino/"
Finclude java
groups=('devel-extra')
archs=('i686' 'x86_64' 'ppc')
Fpkgversep=""
_F_archive_grepv="\(15\|pre\|RC\)"
up2date="Flastarchive http://ftp.mozilla.org/pub/mozilla.org/js/ .zip"
source=(http://ftp.mozilla.org/pub/mozilla.org/js/rhino$pkgver.zip)
sha1sums=('3bb380cfb7f6febb87a64b2dee7fa308042f37e4')

build()
{
	Fcd
	Fjavacleanup
	ant jar # no error handling!
	rm -f build/classes/org/mozilla/javascript/{FieldsAndMethods,JavaMembers}.class
	# end of build hack
	Fant -Dwithout-xmlimpl=true jar
	Fjar build/rhino$pkgver/js.jar
	Fgcj org.mozilla.javascript.tools.shell.Main $Fdestdir/usr/bin/rhino \
		$Fdestdir/usr/share/java/js.jar
}
