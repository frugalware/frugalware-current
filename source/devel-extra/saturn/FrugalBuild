# Compiling Time: 0.06 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=saturn
pkgver=0.4.0
pkgrel=1
pkgdesc='Lock-free data structures for multicore OCaml'
archs=('x86_64')
groups=('devel-extra')
depends=('ocaml>=5.0')
makedepends=('dune' 'ocaml-compiler-libs' 'ocaml-static')
_F_github_author="ocaml-multicore"
_F_github_tag=yes
Finclude github
source+=(remove-domain-shims-dep.patch)
sha1sums=('b63e3fefc35b2b132c37ce5ae6d168c189848d2a' \
          'd43a4c112227f4542c53527678ecb3dc686ce186')
build() {
	Fcd
	Fpatchall

	Fexec dune build --release --verbose || Fdie
	DESTDIR="$Fdestdir" dune install --prefix '/usr' --libdir '/usr/lib/ocaml'
}

# optimization OK
