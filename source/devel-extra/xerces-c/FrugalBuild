# Compiling Time: 1.11 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=xerces-c
pkgver=2.7.0
pkgrel=1
pkgdesc="Xerces2 C++ Parser"
url="http://xml.apache.org/xerces-c/"
depends=('gcc')
groups=('devel-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.apache.org/dist/xml/xerces-c/source/ | grep -m1 tar.gz | sed 's/.*rc_\(.*\).ta.*/\1/' | tr -s '_' '.'"
source=(http://www.apache.org/dist/xml/xerces-c/source/$pkgname-src_2_7_0.tar.gz \
	xerces-c-2.7.0-libpath.patch  xerces-c-2.7.0-multilib.patch)
sha1sums=('56f9587f33fca0a573a45f07762e3262a255d73f' \
	'defaad81f4044b03aedc2d38da6e83725f5d0f61' \
	'6a9760ab87c309e401574b5bd6652a87b568f253')

build() {
	export XERCESCROOT=$Fsrcdir/$pkgname-src_2_7_0
	Fcd $pkgname-src_2_7_0
	patch -Np1 -i $Fsrcdir/xerces-c-2.7.0-libpath.patch || return 1
	patch -Np1 -i $Fsrcdir/xerces-c-2.7.0-multilib.patch || return 1
	cd src/xercesc/
	./runConfigure -plinux -cgcc -xg++ -minmem -nsocket -tnative -rpthread -P/usr || return 1
	Fmake
	make DESTDIR=$Fdestdir install
}

# optimization OK
