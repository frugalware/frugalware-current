# Compiling Time: 0.18 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>
# Contributor: devil505 <devil505linux@gmail.com>

pkgname=performous
pkgver=0.5.1
pkgrel=1
url="http://performous.org/"
pkgdesc="Performous : The free Linux karaoke game"
rodepends=('ultrastar-songs')
depends=('fftw' 'smpeg' 'librsvg' 'xine-lib' 'sdl_gfx>=2.0.19' 'libsigc++2' \
	'sdlimage' 'libgcc' 'sdl' 'gstreamer' 'alsa-lib' 'libboost-mt' 'glibmm' \
	'libxml++' 'jack' 'glew')
makedepends=('boost' 'cmake')
groups=('games-extra')
conflicts=('ultrastar-ng')
replaces=('ultrastar-ng')
archs=('i686' 'x86_64')
_F_sourceforge_ext="-Source.tar.bz2"
Finclude sourceforge
up2date="lynx -dump $url/install.html | grep -m1 Source.tar.bz2 | sed 's/.*s-\(.*\)-S.*/\1/'"
source=(${source/performous-/Performous-} png14-support.patch)
_F_cd_path="Performous-$pkgver-Source"
sha1sums=('bd8a76f0629e9366daa907d32ff76365f4b8b4a8' \
          '61ed0d1081da12cd4bbe676c69dc271bce38fcb0')

build()
{
	Fcd
	Fpatchall
	mkdir -p build || Fdie
	cd build || Fdie
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_CXX_FLAGS="${CXXFLAGS}" ..|| Fdie
	make || Fdie
	make DESTDIR=$Fdestdir install || Fdie

}

# optimization OK
