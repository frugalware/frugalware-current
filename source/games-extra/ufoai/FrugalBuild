# Compiling Time: 0.89 SBU
# Maintainer: Devil505 <devil505linux@gmail.com>
# Contributor: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=ufoai
pkgver=2.3
pkgrel=1
pkgdesc="UFO: ALIEN INVASION is a squad-based tactical strategy game in the tradition of the old X-COM PC games, but with a twist"
depends=('libgl' 'libglx' 'sdl' 'sdl_mixer' 'sdl_ttf' 'sdlimage' 'libpng' 'libjpeg' 'libvorbis' \
	'libogg' 'openal>=1.7.411' 'freealut>=1.1.0-3' 'libxxf86dga' 'curl' 'xf86dga' 'xf86vidmodeproto' \
	'xvidcore' 'libtheora')
groups=('games-extra')
options=('nobuild')
archs=('i686' 'x86_64')
_F_sourceforge_realname="UFO:AI 2.x"
_F_sourceforge_ext="-source.tar.bz2"
Finclude sourceforge
Fconfopts="${Fconfopts[@]} --enable-release --disable-uforadiant"
source=(${source[@]} ${source/$pkgname-$pkgver-source.tar.bz2/$pkgname-$pkgver-data.tar})

build() {
	Fmkdir usr/share/ufoai/

	Fcd $pkgname-$pkgver-source
	Fmake
	make DESTDIR="$Fdestdir" install_exec || Fdie

	# Copy pk3 data files and game.so to base/
	Fcp base usr/share/ufoai/

	# Create menu
	Finstallrel 644 debian/ufoai.desktop usr/share/applications/ufoai.desktop
	Finstallrel 644 debian/ufoai-safe.desktop usr/share/applications/ufoai-safe.desktop
	Finstallrel 644 debian/ufoded.desktop usr/share/applications/ufoded.desktop

	Ficonrel debian/ufoai.xpm
	Ficonrel debian/ufoded.xpm
}

sha1sums=('f6f0da3b81d0236930efb4efa553a4c7c1fb374f' \
          '4860eace5f379b6ccfe308a8fde00b7ddc3c0ada')
# optimization OK
