# Compiling Time: 1.38 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=ultrastar-manager
pkgver=1.8.3
pkgrel=1
pkgdesc='Qt program used to manage USDX songs'
archs=('x86_64')
groups=('games-extra')
depends=('qt5-multimedia' 'libmediainfo' 'taglib' 'cld2')
_F_github_author=UltraStar-Deluxe
_F_github_name=UltraStar-Manager
_F_github_tag_v=yes
_F_github_devel=yes
Finclude github

build() {
	Funpack_scm
	Fcd

	cd src/plugins/audiotag && qmake audiotag.pro && make && cd ../../../
	cd src/plugins/cleanup && qmake cleanup.pro && make && cd ../../../
	cd src/plugins/lyric && qmake lyric.pro && make && cd ../../../
	cd src/plugins/preparatory && qmake preparatory.pro && make && cd ../../../
	cd src/plugins/rename && qmake rename.pro && make && cd ../../../

	cd src
	Fexec qmake UltraStar-Manager.pro || Fdie
	Fmake
	
	Finstallrel 644 ../setup/unix/UltraStar-Manager.png  usr/share/pixmaps/UltraStar-Manager.png
	Finstallrel 644 ../setup/unix/UltraStar-Manager.desktop usr/share/applications/UltraStar-Manager.desktop

	Fmkdir opt/UltraStar-Manager
	Fcprel ../bin/release/\* opt/UltraStar-Manager/

	Fln /opt/UltraStar-Manager/UltraStar-Manager usr/bin/UltraStar-Manager
}

# optimization OK
