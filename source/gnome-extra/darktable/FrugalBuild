# Compiling Time: 1.38 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: tahk <mail.tahk@gmail.com>


pkgname=darktable
pkgver=2.6.1
pkgrel=1
pkgdesc="A virtual lighttable and darkroom for photographers (manage RAW images)"
depends=('gtk+3' 'json-glib' 'libxslt' 'libgomp' 'gphoto2' 'openexr>=2.3.0' 'libwebp' \
	'lensfun' 'librsvg' 'exiv2>=0.27' 'openjpeg>=2.0' 'libsecret' 'graphicsmagick' \
	'flickcurl' 'pugixml>=1.9-3' 'lua' 'colord-gtk' 'libcups')
makedepends=('x11-protos' 'intltool' 'llvm' 'clang' 'cups')
groups=('gnome-extra')
archs=('x86_64')
_F_github_author="$pkgname-org"
_F_cmake_confopts="	-DDONT_USE_INTERNAL_LUA=Off"
Finclude github cmake
up2date="$up2date | sed 's/release-//'"
source=("https://github.com/darktable-org/darktable/releases/download/release-$pkgver/darktable-$pkgver.tar.xz")
sha1sums=('bb2a2a0f1a04fb47ac31aef9407b106ce64d9489')

replaces=('rawstudio')
provides=('rawstudio')
conflicts=('rawstudio')

build() {
	CMake_build
	Fmkdir etc/ld.so.conf.d
	echo /usr/lib/darktable  >> "$Fdestdir/etc/ld.so.conf.d/darktable.conf" || Fdie

}

# optimization OK
