# Compiling Time: 0.12 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gnome-do
pkgver=0.5.0.1
pkgrel=1
pkgdesc="A powerful, remote control for GNOME"
depends=('gtk+2' 'glibc' 'freetype2' 'libxau' 'libxdmcp' 'libxdamage' \
	'libxext' 'libxml2' 'gnome-sharp' 'ndesk-dbus-glib' 'gnome-keyring-sharp' \
	'gnome-desktop-sharp' 'mono-addins')
makedepends=('perl-xml-parser' 'intltool')
groups=('gnome-extra')
options=('scriptlet')
archs=('i686' 'x86_64')
url="http://do.davebsd.com/"
up2date="lynx -dump http://ppa.launchpad.net/do-core/ubuntu/pool/main/g/gnome-do/ \
| grep tar.gz |  tail -1 | cut -d '/' -f 10 | sed 's/gnome-do_//' | sed 's/.orig.tar.gz//'"
source=(http://launchpad.net/do/trunk/0.5/+download/$pkgname-$pkgver.tar.gz Fix_GnomeKeyringSharp.diff \
	Fix_LibLauncher.diff)
Finclude mono
_F_desktop_categories="Utility;"
_F_desktop_icon="gnome-run"
sha1sums=('cc40d8a62388bcd99ec63f4fbe75dc7a4013bab9' \
          '8fcd881344ddac38d52a7784c3ec2ab1132a367d' \
          '76c61894d7cd2b4b9aec1a60fd40a9015a12e9ea')

build() {
	unset MAKEFLAGS
	Fmonoexport
	Fcd
	Fpatchall
	Fautoreconf
	Fmake
	Fmakeinstall
	Fmonocleanup
	#fix launcher
	Frm usr/bin/gnome-do
	Fwrapper "mono /usr/lib/$pkgname/Do.exe" $pkgname
	Fcp $pkgname-$pkgver/libdo/.libs/libdo.so usr/lib/$pkgname/libdo.so
	Fdesktop2
}

# optimization OK
