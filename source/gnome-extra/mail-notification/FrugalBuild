# Compiling Time: 0.32 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>
# Contributor: TranzeManiaC <tranzemaniac@jabberlive.org>

pkgname=mail-notification
pkgver=5.4
pkgrel=7
pkgdesc="Mail Notification monitors your mailboxes for new mail."
url="http://www.nongnu.org/mailnotify/"
depends=('gmime>=2.4.3' 'nautilus>=2.30.1' 'dbus-glib>=0.76' \
	'cyrus-sasl' 'libnotify>=0.7' 'libgnomeui>=2.24.3-3')
up2date="lynx -dump http://download.savannah.gnu.org/releases/mailnotify | grep $pkgname | Flasttar"
makedepends=('intltool')
archs=('i686' 'x86_64')
_F_gnome_schemas=('/etc/gconf/schemas/mail-notification.schemas')
options=('scriptlet')
_F_gnome_iconcache=y
_F_gnome_desktop=y
Finclude gnome-scriptlet
groups=('gnome-extra')
install=$pkgname.install
source=(http://savannah.nongnu.org/download/mailnotify/$pkgname-$pkgver.tar.bz2 mail-notification-5.4-gmime.diff)
sha1sums=('c148449c5d2fd0a75571e4e42932da1f1ae013f6' \
          '9e3de8a7a0a01effc2236826bf83bed20e52fdbf')
build() {
	Fcd
	Fpatchall
	./jb configure destdir="${Fdestdir}" prefix="/usr" libdir=/usr/lib \
		sysconfdir="/etc" localstatedir="/var" \
		cflags="${CFLAGS}" cppflags="${CXXFLAGS}" ldflags="${LDFLAGS}" || Fdie
	./jb build || Fdie
	./jb install || Fdie
	#Fbuild
	Fbuild_gnome_scriptlet
	Fmkdir /usr/share/gnome/autostart
	Fmv /etc/xdg/autostart/$pkgname.desktop /usr/share/gnome/autostart/
	Frm /etc/xdg
}

# optimization OK
