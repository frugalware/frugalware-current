# Compiling Time: 2.34 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=miro
_F_archive_name=Miro
pkgver=2.5.2
pkgrel=3
pkgdesc="The free and open source internet TV platform."
url="http://www.getmiro.com/"
depends=('gtk+2>=2.20.0-2' 'pygtk' 'dbus-python' 'pyrex' 'libboost-mt>=1.37.0' 'xine-lib' 'db>=4.7.25' 'bsddb3>=4.7.1'
	'nss>=3.12' 'nspr>=4.7.1' 'xulrunner' 'gnome-python-extras>=2.25.3-5' 'gnome-python-extras-mozembed>=2.25.3-5' 'pysqlite2')
makedepends=('boost>=1.37.0')
groups=('gnome-extra')
replaces=('democracy')
conflicts=('democracy')
archs=('i686' 'x86_64' 'ppc')
options=('scriptlet')
up2date="lynx -dump 'http://ftp.osuosl.org/pub/pculture.org/miro/src/?C=M;O=A'| Flasttar"
source=(http://ftp.osuosl.org/pub/pculture.org/$pkgname/src/${_F_archive_name}-$pkgver.tar.gz \
	gcc43.patch boost136.patch)
sha1sums=('3e6326d018efd6e172b187b896dfd2a6a68821a7' \
          'ef9aa397d765d95457d7eaba1d63e4e9c1c102ac' \
          'f0f506e7828036015778c27f81a3a2d4229a8e41')

build()
{
	Fcd
	Fpatchall
	Fsed 'boost_python' 'boost_python-mt' platform/gtk-x11/setup.py
	PKG_CONFIG_PATH=$PKG_CONFIG_PATH:$Fsrcdir
	cd platform/gtk-x11 || Fdie
	python setup.py install --root=$Fdestdir || Fdie
}

# optimization OK
