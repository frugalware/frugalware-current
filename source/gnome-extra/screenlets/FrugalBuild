# Compiling Time: 0.01 SBU
# Maintainer: AlexExtreme <alex@alex-smith.me.uk>

pkgname=screenlets
pkgver=0.0.7
pkgrel=1
pkgdesc="Screenlets are small applications that can be described as the virtual representation of things lying/standing around on your desk"
url="http://www.go-compiz.org/index.php?title=Desktop_Screenlets"
depends=('compiz' 'python' 'gnome-python-desktop-rsvg')
groups=('gnome-extra')
archs=('i686')
up2date="lynx -dump http://www.compiz.org/index.php?title=Desktop_Screenlets | grep 'tar.bz2' | Flasttarbz2"
source=(http://www.ryxperience.com/storage/$pkgname-$pkgver.tar.bz2 \
	screenlets-0.0.7-fix-crash.patch)
sha1sums=('3528faa445b739e5f232cec556a338ef6a7bf921' \
	  '85e1ae916567acf14b6a19da7cbba57c4e0a2c78')

build() {
	Fcd
	Fpatchall
	rm -f Makefile
	Fsed "/usr/local" "/usr" setup.py
	Fsed "INSTALL_PREFIX = '/usr/local'" "INSTALL_PREFIX = '/usr'" src/lib/__init__.py
	Fsed "/usr/local/share/screenlets" "/usr/share/screenlets" bin/screenletsd
	Fmake
	Fmakeinstall
}
