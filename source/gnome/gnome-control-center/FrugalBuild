# Compiling time: 1.77 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

USE_CHEESE=${USE_CHEESE:-"y"}

options+=('asneeded')

pkgname=gnome-control-center
pkgver=3.7.90
pkgrel=1
pkgdesc="GNOME Control Center"
depends=('gnome-desktop>=3.7.90' 'gnome-menus>=3.7.90' 'gnome-online-accounts>=3.7.90' 'libgtop' 'gnome-settings-daemon>=3.7.90' 'systemd>=188' \
	'mesademos' 'libpwquality' 'gst1-plugins-bad' 'ibus' 'cups-pk-helper' 'colord-gtk' 'accountsservice' \
	'nm-connection-editor' 'libsmbclient' 'talloc' \
#Add libgnome-keyring but remove with nm-apllet>0.9.8 ( migration libsecret)
	'libgnome-keyring')
makedepends=('intltool' 'gnome-doc-utils' 'cups' 'krb5' 'icu4c>=4.8' 'docbook-xsl' 'gobject-introspection')
rodepends=('gst1-plugins-base-alsa>=0.10.19-2' 'sound-theme-freedesktop')
groups=('gnome' 'gnome-minimal')
archs=('i686' 'x86_64')
_F_gnome_glib="y"
#_F_gnome_scrollkeeper="y"
_F_gnome_desktop="y"
_F_gnome_mime="y"
_F_gnome_iconcache="y"
_F_gnome_doc="y"
_F_gnome_ext=".tar.xz"
_F_gnome_devel="y"
options+=('scriptlet')
Finclude gnome gnome-scriptlet
#source=($source nm-ui-utils.patch nm-ui-utils-2.patch)
Fconfopts+=" --enable-debug \
	--disable-update-mimedb --disable-static --enable-systemd"
if Fuse $USE_CHEESE; then
	export CFLAGS="$CFLAGS -I/usr/include/cheese -I/usr/include/gstreamer-1.0 -I/usr/include/libxml2"
       	depends=("${depends[@]}" "cheese-devel>=3.6.0")
fi
sha1sums=('fb768a1236a4b8f54988dc3af256f20f309689ce')
replaces=('accountsdialog' 'gnome-system-tools')
build() {
	Fbuild

	Fbuild_gnome_scriptlet
	#provided by gnome-media
	#Frm usr/share/sounds/gnome/default
	_F_gnome_split_doc
}

# optimization OK
