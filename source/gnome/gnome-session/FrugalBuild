# Compiling time: 0.38 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

USE_DEBUG=${USE_DEBUG:-"y"}

pkgname=gnome-session
pkgver=3.1.5
pkgrel=3
pkgdesc="GNOME session manager"
depends=('libxml2>=2.7.8' 'gnome-desktop>=3.1.5' 'polkit' 'upower' 'gconf-gtk'  'usermode' \
	'dbus-glib>=0.76' 'gnome-control-center>=3.0.0' 'libnotify' 'gnome-keyring>=3.0.0' \
	'metacity')
makedepends=('intltool' 'gnome-common')
#gnome-session start gnome-shell and if failed start gnome-panel
rodepends=('consolekit-x11' 'gnome-shell-extensions' 'gnome-panel' 'dconf')
groups=('gnome')
archs=('i686' 'x86_64' 'ppc')
_F_gnome_glib="y"
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
Finclude gnome gnome-scriptlet
source=($source check_XGetWindowProperty.diff)
Fconfopts="$Fconfopts --with-gtk=3.0"
sha1sums=('f13b9d7fb86d15a45c179b8ebb4f11cccd5090a4' \
          '32a9743c3797a29355b605dcf7a78f73190c8249')

build() {
	Fcd
	if Fuse $USE_DEBUG; then
		Fsed "static gboolean debug = FALSE" \
			"static gboolean debug = TRUE" \
			gnome-session/main.c
	fi
	Fbuild
	Fbuild_gnome_scriptlet
}

# optimization OK
