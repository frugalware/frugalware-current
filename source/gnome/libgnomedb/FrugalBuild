# Last modified: Fri, 28 Oct 2005 15:41:59 +0200
# Compiling time: ~2.27 SBU
# Maintainer: Laszlo Dvornik <dvornik@gnome.hu>

pkgname=libgnomedb
pkgver=1.9.102
pkgrel=1
pkgdesc="Database widget library for GNOME"
url="http://www.gnome-db.org/"
depends=('libgnomeui' 'libgnomeprint' 'libgda>=1.9.100' 'gtksourceview' 'perl-mysql')
makedepends=('intltool' 'gtk-doc' 'perl-mysql')
groups=('gnome' 'gnome-libs')
archs=('i686' 'x86_64')
options=('scriptlet')
nondevel=1
Finclude gnome
sha1sums=('bfb1db30d7c49c0908927c84df9636599c23299d')

build() {
	Fconf --disable-schemas-install --enable-gtk-doc
	Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" Makefile
	Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" control-center/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" control-center/Makefile
	Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" glade/Makefile
	Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" glade/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" po/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" po/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" testing/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" testing/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" extra/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" extra/Makefile
        Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/graph/Makefile
        Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/graph/Makefile
        #Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/handlers/Makefile
        #Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/handlers/Makefile
        #Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/parser/Makefile
        #Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/parser/Makefile
        #Fsed "CFLAGS = -Wall -g" "CFLAGS = -Wall $CFLAGS" libgnomedb/handlers/plugins/Makefile
        #Fsed "\(.*\)_CFLAGS = \(.*\)" "\1_CFLAGS = $CFLAGS \2" libgnomedb/handlers/plugins/Makefile
	make
	# Disable scrollkeeper in Makefile.
	sed -i 's|^.*\-scrollkeeper-update.*$||' doc/Makefile
	Fmakeinstall GCONF_DISABLE_SCHEMA_INSTALL=1
}

# optimalization OK
