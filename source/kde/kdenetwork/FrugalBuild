# Compiling Time: 17.75 SBU
# Maintainer: crazy <crazy@frugalware.org>

pkgname=kdenetwork
pkgrel=1
pkgdesc="KDE Networking Programs"
groups=('kde')
archs=('i686' 'x86_64' 'ppc')
Finclude kde
depends=()
makedepends=("${makedepends[@]}" 'boost' "kdelibs-compiletime>=${_F_kde_ver}" "kdelibs>=${_F_kde_ver}" \
	"ksgmltools2>=${_F_kde_ver}" "kdepimlibs-compiletime>=${_F_kde_ver}" 'alsa-lib' 'libqttest' 'docbook-xsl')
source=("${source[@]}" \
	find_libgadu.patch \
	find_libortp.patch \
	strigi-analyser.diff)
provides=("$pkgname-docs")
conflicts=("${provides[@]}")
replaces=("${provides[@]}")

sha1sums=('95a69183912fe9f29a2e877c0655050d4a7252d1' \
          '3d0f37d5f453da75b8dbe2aa9ba38316cf723824' \
          '1476122463258ed03160dc01b38caf3eaebaf0e8' \
          '653ad0c3fb581efd37fbb0a899acbbe75f081402')

Qt4="${_F_kde_qtver}"
Kde4="${_F_kde_ver}"

## DEPS: mediastreamer ( no way with our ffmpeg version )

subpkgs=("${subpkgs[@]}" 'kdnssd')
subdescs=("${subdescs[@]}" "KDNSSD is a DNS Service Discovery KDE.")
subdepends=("${subdepends[@]}" "libdnssd>=$Kde4 strigi>=0.7.2-2 libqtnetwork>=$Qt4 libqtxml>=$Qt4 xfsprogs-acl libqtsvg>=$Qt4
	xz libgcc libsm libxtst libxcursor libpng fontconfig libuuid")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'kget')
subdescs=("${subdescs[@]}" "KGet is a download manager for KDE.")
subdepends=("${subdepends[@]}" "libkworkspace>=$Kde4 libnepomuk>=$Kde4 libqtsql>=$Qt4 qca libqgpgme>=$Kde4 zlib libxau libxfixes libxdmcp libknewstuff>=$Kde4
	libqtuitools>=$Qt4 libqtwebkit>=$Qt4 libdnssd>=$Kde4 libthreadweaver>=$Kde4 libqtopengl>=$Qt4 libkross>=$Kde4 libqtscript>=$Qt4
	libkhtml>=$Kde4 gmp libkutils>=$Kde4 libknotify>=$Kde4")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'kopete')
subdescs=("${subdescs[@]}" "Kopete is a multi-protocol instant messenger for the KDE Desktop.")
subdepends=("${subdepends[@]}" "libotr libkutils>=$Kde4 libkde3support>=$Kde4 libkabc>=$Kde4 libqtnetwork>=$Qt4 libice libxtst libxfixes libxrender libgcc xz libxau
	libxdmcp libv4l libqtsql>=$Qt4 strigi>=0.7.2-2 xfsprogs-acl libuuid libldap libkhtml>=$Kde4 libknotify>=$Kde4 qimageblitz qca meanwhile
	libknewstuff>=$Kde4 libidn libkpimidentities>=$Kde4 libdnssd>=$Kde4 libkmime>=$Kde4 libgadu libmsn libxslt")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" 'sim')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'kppp')
subdescs=("${subdescs[@]}" "KPPP is a pppd dialer and front end for KDE.")
subdepends=("${subdepends[@]}" "libkde3support>=$Kde4 libqtgui>=$Qt4 libstdc++ libqtxml>=$Qt4 zlib strigi libqtnetwork>=$Qt4
	xfsprogs-acl libxrender libice libxtst libxfixes xz libqtsql>=$Qt4 libuuid")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'krdc')
subdescs=("${subdescs[@]}" "KRDC is a Remote Desktop Client for KDE.")
subdepends=("${subdepends[@]}" "xz libqtsvg>=$Qt4 libsm libqtxml>=$Qt4 libxcursor libpng fontconfig libuuid libxcb libxi libvncserver telepathy-qt4
	libkfile>=$Kde4 libknotify>=$Kde4 libkutils>=$Kde4 libdnssd>=$Kde4 strigi>=0.7.2-2 xfsprogs-acl")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'krfb')
subdescs=("${subdescs[@]}" "KRfb is a RFB protocol server (VNC).")
subdepends=("${subdepends[@]}" "libgcc libqtsvg>=$Qt4 libsm libqtxml>=$Qt4 libxcursor libpng fontconfig libxcb libqtnetwork>=$Qt4
	xz libuuid libxi libvncserver libdnssd>=$Kde4")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" "$pkgname-strigi-analyzer")
subdescs=("${subdescs[@]}" "Strigi Analyzer for Kdenetworks.")
subdepends=("${subdepends[@]}" "strigi>=0.7.2-2 libgcc libtiff libqtgui>=$Qt4 libice libxrender libxext libuuid")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

_F_kde_subpkgs=("${subpkgs[@]}")

subpkgs=("${subpkgs[@]}" "$pkgname-filesharing")
subdescs=("${subdescs[@]}" "Front end for KDE to enable or disable , simple ( HOME ) or advanced ( SAMBA , NFS ) file sharing")
subdepends=("${subdepends[@]}" "libkde3support>=$Kde4 libqtgui>=$Qt4 libstdc++ zlib strigi>=0.7.2-2 libqtnetwork>=$Qt4 libqtxml>=$Qt4
	xfsprogs-acl libxrender libice libxtst libxfixes xz libqtsql>=$Qt4 libuuid")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" "$pkgname-sambaconf")
subdescs=("${subdescs[@]}" "Samba configuration front end for KDE.")
subdepends=("${subdepends[@]}" "libkde3support>=$Kde4 libqtgui>=$Qt4 libstdc++ libice libqtxml>=$Qt4 libxtst libxfixes libxrender zlib
	strigi>=0.7.2-2 libqtnetwork>=$Qt4 xfsprogs-acl xz libqtsql>=$Qt4 libuuid")
subgroups=("${subgroups[@]}" 'kde')
subreplaces=("${subreplaces[@]}" '')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

rodepends=("${rodepends[@]}" "${subpkgs[@]}")

build()
{
	KDE_make_split

	KDE_project_install filesharing
	Fsplit $pkgname-filesharing usr/share/kde4/services/fileshare*
	Fsplit $pkgname-filesharing usr/lib/kde4/*fileshare*

	## rest to -samba
	Fsplit $pkgname-sambaconf /\*

	KDE_install
}

# optimization OK

