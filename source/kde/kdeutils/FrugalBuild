# Compiling Time: 5.92 SBU
# Maintainer: DeX77 <dex@dragonslave.de>

pkgname=kdeutils
pkgrel=1
pkgdesc="KDE General Utilities"
depends=('libarchive' 'kdepimlibs>=4.3.3' 'kdelibs-experimental>=4.3.3' \
	'qca' 'libqt3support')
makedepends=("pkgconfig" "automoc4")
groups=('kde')
replaces=('pwmanager')
archs=('i686' 'x86_64')
_F_cmakekde_final=OFF
Finclude kde
sha1sums=('af3bd5c91020ae4fcd27b799eecf06aa161b48b4')

subpkgs=("printer-applet" \
"superkaramba")
subdescs=("Printer-applet is a system tray utility, to autoconfig printers" \
"SuperKaramba is a tool that allows you to easily create interactive\
eye-candy on your KDE desktop.")
subdepends=("system-config-printer kdebindings>=4.3.1" \
"python>=2.6 qimageblitz")
subgroups=('kde-extra' 'kde-extra')
subarchs=('i686 x86_64' 'i686 x86_64')


build(){
	#Conf all
	Fcd $_F_cd_path
	CMake_prepare_build
	CMake_conf

	#build printer-applet
	cd printer-applet || Fdie
	make DESTDIR=$Fdestdir install || Fdie
	Fsplit printer-applet /usr
	cd .. || Fdie

	#build superkaramba
	cd superkaramba || Fdie
	make DESTDIR=$Fdestdir install || Fdie
	Fsplit superkaramba /usr /etc
	cd .. || Fdie

	#delete folders to prevent duplicates
	rm -rf superkaramba printer-applet || Fdie
	#now the rest
	_F_cmake_confopts="-DBUILD_superkaramba=OFF -DBUILD_printer-applet=OFF"
	CMake_conf
	make DESTDIR=$Fdestdir install || Fdie
}

# optimization OK
