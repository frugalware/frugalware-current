# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=evdi
pkgver=1.5.1
pkgrel=24
pkgdesc="Extensible Virtual Display Interface"
groups=('lib-extra')
archs=('x86_64')
depends=('libdrm')
_F_github_author="DisplayLink"
_F_github_tag_v="y"
Finclude github kernel-module
source+=("kernel-4.20.patch")
sha1sums=('ed2bd489a7f8dddb6f27dcc0b4377c94a55809f6' \
          '57f45d5aab635335da30b5e658fb5500f750f5af')
options+=('nostrip')
_F_make_opts+="	KERN_DIR=${_F_kernelmod_dir}/build MODULE_DIR_TST=${Fdestdir}/${_F_kernelmod_dir} KVER=${_F_kernelmod_uname}"
build() {
	Fcd
	Fpatchall
	Fmake
	Finstallrel 755 library/libevdi.so usr/lib/libevdi.so
	Finstallrel 644 module/evdi.ko $_F_kernelmod_dir/kernel/drivers/gpu/drm/evdi/evdi.ko
	
	Fbuild_kernelmod_scriptlet
}

# optimization OK
