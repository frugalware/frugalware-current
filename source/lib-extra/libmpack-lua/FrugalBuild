# Compiling Time: 1.00 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=libmpack-lua
pkgver=1.0.9
pkgdesc="libmpack lua binding"
pkgrel=1
archs=('x86_64')
depends=('libmpack' 'lua51')
groups=('lib-extra')
_F_github_tag=y
_F_github_author="libmpack"
Finclude github
sha1sums=('27263e71d25ef7dd66ac0b4506ef9e3be3239cd3')
_F_make_opts+="PREFIX=/usr"

build() {
	Fcd
	Fexec gcc -O2 -fPIC -DMPACK_USE_SYSTEM -I/usr/include/lua5.1 -c lmpack.c -o lmpack.o || Fdie
	Fexec gcc -shared -lmpack -o mpack.so.5.1 lmpack.o || Fdie
	Finstallrel 755 mpack.so.5.1 /usr/lib/lua/5.1/mpack.so
}

# optimization OK
