# Compiling Time: 1.32 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu

pkgname=stlport
pkgver=4.6.2
pkgrel=1
pkgdesc="C++ STL library"
url="http://www.stlport.com/"
depends=('libstdc++')
groups=('lib-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.stlport.com/archive/?M=D|grep t-[0-9\.]*tar.gz$|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=($url/archive/`echo $pkgname | sed 's/stl/STL/'`-$pkgver.tar.gz stlport-gcc-fixes.patch)
sha1sums=('2910ecb520140b4de437a1a865507397e27f3d70' 'c60ddda9624a6672c326c080a22ce2299f9987c0')

build() {
	cd $Fsrcdir/`echo $pkgname | sed 's/stl/STL/'`-$pkgver
	Fpatchall
	make -C src -f gcc.mak "LDLIBS_RELEASE_dynamic=-lpthread"

	Fmkdir usr/{include/stlport,lib}
	cp -R stlport $Fdestdir/usr/include/
	Frm /usr/include/stlport/BC50
	chmod -R a+r $Fdestdir/usr/include/stlport
	cp -a lib/* $Fdestdir/usr/lib/
	Fln libstlport_gcc_stldebug.so /usr/lib/libstlport_gcc_debug.so
	Frm /usr/lib/obj
}

# optimization OK
