# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=suitesparse
pkgver=5.7.2
pkgrel=1
pkgdesc="A collection of sparse matrix libraries"
url="http://faculty.cse.tamu.edu/davis/suitesparse.html"
archs=('x86_64')
depends=('lapack' 'libgomp' 'intel-tbb' 'libstdc++')
makedepends=('cmake')
groups=('lib-extra')
_F_github_author="DrTimothyAldenDavis"
_F_github_name="SuiteSparse"
_F_github_tag_v=y
Finclude github
source+=(suitesparse-no-demo.patch)
sha1sums=('ccc50177425d0d9bfe878786b8f2729c247efa90' \
          'ccc5089c3e13173b8f03af515dbcc7041b4005de')
_F_cd_path="SuiteSparse-$pkgver"
options=('static')

build() {
	Fcd
	Fpatchall
	BLAS=-lblas LAPACK=-llapack TBB=-ltbb SPQR_CONFIG=-DHAVE_TBB make || Fdie
	BLAS=-lblas LAPACK=-llapack TBB=-ltbb SPQR_CONFIG=-DHAVE_TBB make INSTALL_LIB="${Fdestdir}"/usr/lib INSTALL_INCLUDE="${Fdestdir}"/usr/include install || Fdie
}

# optimization OK
