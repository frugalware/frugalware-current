# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=wasi-libc
pkgver=19
pkgrel=3
pkgdesc='WASI libc implementation for WebAssembly'
archs=('x86_64')
groups=('lib-extra')
_F_github_author="WebAssembly"
depends=('glibc')
makedepends=('llvm' 'clang')
options=('static')
_F_github_tag=y
_F_github_tag_prefix="wasi-sdk-"
Finclude github
sha1sums=('6ddd50ff053e8e55b9442957df11120ae150e323')
_F_cd_path="wasi-libc-wasi-sdk-$pkgver"
_F_make_opts+=" NM=/usr/bin/llvm-nm INSTALL_DIR=$Fdestdir/usr/share/wasi-sysroot"

build() {
	Fbuild
	Fexec find "$Fdestdir/usr/share/wasi-sysroot/lib" -type f -regex '.*\\.\\(a\\|rlib\\)' -print -exec llvm-ranlib '{}' ';' || Fdie
}

# optimization OK
