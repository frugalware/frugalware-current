# Compiling Time: 0.0 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=appstream
_F_archive_name="AppStream"
pkgver=1.0.0
pkgrel=3
pkgdesc="Provides a standard for creating app stores across distributions"
url="http://distributions.freedesktop.org/wiki/${_F_archive_name}"
depends=('curl' 'libxmlb' 'libyaml' 'gobject-introspection>=1.50.0' 'libstemmer')
makedepends=('gperf' 'vala' 'libxslt' 'gtk-doc' 'qt5-tools' 'python3-pygments' 'itstool' 'systemd-devel' 'gi-docgen')
groups=('lib')
archs=("x86_64")
source=(http://www.freedesktop.org/software/$pkgname/releases/${_F_archive_name}-$pkgver.tar.xz \
	fix-qt5-link-target.patch)
up2date="Flasttar http://www.freedesktop.org/software/$pkgname/releases"
sha1sums=('e319e85723996ef985b6511a1c5fdf0cce9229af' \
          '057e046b4cac4e208a531f86143f92241f72f63a')
options=('scriptlet')
_F_meson_confopts+="	-Dqt5=true \
			-Dvapi=true"
Finclude meson
options=('scriptlet')

subpkgs=("$pkgname-qt")
subdescs=("Qt Bindings for Appstream")
subrodepends=("$pkgname=$pkgver")
subdepends=('qt5-base')
subgroups=('xlib')
subarchs=("x86_64")

build() {

	Meson_build
	Fsplit appstream-qt     usr/include/AppStreamQt5/
	Fsplit appstream-qt	usr/lib/cmake/AppStreamQt5/
	Fsplit appstream-qt	usr/lib/libAppStreamQt5.so*
}

# optimization OK
