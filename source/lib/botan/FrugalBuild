# Compiling Time: 0.81 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Kooda <kooda@upyum.com>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=botan
pkgver=2.17.2
pkgrel=1
pkgdesc="Crypto library written in C++"
url="http://botan.randombit.net/"
depends=('bzip2' 'openssl>=1.1.1-2' 'glibc' 'xz' 'sqlite3' 'zlib' 'libstdc++' 'libgcc')
makedepends=('gcc>=9.2.1')
groups=('lib')
archs=("x86_64")
_F_github_author="randombit"
_F_github_tag="yes"
Finclude github
sha1sums=('345d6b8763ba4dbd4a9b98b8acb6e8148efb313b')
options+=('force')

subpkgs=("${pkgname}-static")
subdescs=("Static files for $pkgname")
subdepends=('')
subgroups=('devel-extra')
subarchs=('x86_64')

build()
{
	Fcd
	Fset_lto_toolchain
	Fsed "-O3" "$CFLAGS" src/build-data/cc/gcc.txt
	Fexec ./configure.py \
		--prefix=/usr \
		--cc=gcc \
		--os=linux \
		--with-openssl \
		--with-sqlite3 \
		--with-zlib \
		--with-bzip2 \
		--with-lzma || Fdie
	Fexec make || Fdie
	Fexec make DESTDIR=$Fdestdir install || Fdie
	Fsplit ${pkgname}-static  usr/lib/*.a
}

# optimization OK
