# Compiling Time: 0.07 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=qc-usb
pkgver=0.6.6
pkgrel=77
pkgdesc="Quickcam kernel driver."
groups=('multimedia-extra')
archs=('i686' 'x86_64')
_F_sourceforge_dirname="qce-ga"
Finclude sourceforge kernel-module
url="http://qce-ga.sourceforge.net/"
source=($source kernel-2.6.2{4,6,7,8}.patch kernel-2.6.3{0,3,6,7}.patch)
sha1sums=('947a9f1233586af71d82e413f455ef01ee388b43' \
          'f77487fc75fe1a79d93813141448c04cc538a890' \
          'b549293fe695aa346b26a7d52c65ac142c4ae4bc' \
          '5f7ccc2df2a017d8d6bdca2469aa65646e58685a' \
          '1f8dd39d711f0160a6ce962989db6ad3550fccf4' \
          'b735e4219a429f6c574726377a106162a251ed10' \
          '7ab1ba881d2d8b0b0f86c4557eb7b3601e6f6ccf' \
          '51276900abe7ea030a8c7d0c691f8be0140d741f' \
          '841a7662693d47fe0bbbe79f837b6410bc9e10f2')

build() {
	Fpatchall
	# no Fcheckkernel, crosscompilation verified
	make LINUX_DIR=$_F_kernelmod_dir/build all || return 1
	Ffilerel $_F_kernelmod_dir/kernel/drivers/usb/misc/quickcam.ko
	Fbuild_kernelmod_scriptlet
}
