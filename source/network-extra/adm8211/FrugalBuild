# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=adm8211
pkgver=20060111
pkgrel=12
pkgdesc="IEEE 802.11 wireless LAN driver for adm8211 based cards"
url="http://aluminum.sourmilk.net/adm8211/"
Finclude kernel-module
groups=('network-extra')
archs=('i686')
up2date="lynx -dump $url|grep bz2$|sed -n 's/.*-\(.*\)\.t.*/\1/;$ p'"
source=($url/$pkgname-$pkgver.tar.bz2)
sha1sums=('69658563c465c5c40d803d528ac3834d81d2cd0a')

build()
{
	# no Fcheckkernel, crosscompilation verified
	Fcd $pkgname
	find . -type f -exec sed -i '/#include <linux\/config.h>/d' {} \;
	Fsed '$(shell uname -r)' "$_F_kernelmod_uname" Makefile
	Fsed '\([^=]\) /lib' "\1 $Fdestdir/lib" Makefile
	# we'll do this, dude
	Fsed 'depmod' "#depmod" Makefile
	Fbuild
}
