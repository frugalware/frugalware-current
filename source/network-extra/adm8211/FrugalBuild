# Compiling Time: 0.01 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=adm8211
pkgver=20060111
pkgrel=23
pkgdesc="IEEE 802.11 wireless LAN driver for adm8211 based cards"
url="http://aluminum.sourmilk.net/adm8211/"
Finclude kernel-module
groups=('network-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump $url|grep bz2$|sed -n 's/.*-\(.*\)\.t.*/\1/;$ p'"
source=($url/$pkgname-$pkgver.tar.bz2 adm8211-20060111-linux26{20,22}.patch)
sha1sums=('69658563c465c5c40d803d528ac3834d81d2cd0a' \
          '553e345e276a6981f21da4fd2d3ac5521bab370c' \
          '3cc4e06831cdd6deaf8af201dc8166a4f08daa9e')

build()
{
	# no Fcheckkernel, crosscompilation verified
	Fcd $pkgname
	Fpatchall
	Fsed '$(shell uname -r)' "$_F_kernelmod_uname" Makefile
	Fsed '\([^=]\) /lib' "\1 $Fdestdir/lib" Makefile
	# we'll do this, dude
	Fsed 'depmod' "#depmod" Makefile
	Fmake
	Fmakeinstall
}
