# Compiling Time: 0 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=ca-certificates
pkgver=20090814
pkgrel=4
pkgdesc='Common CA certificates'
archs=('i686' 'x86_64' 'ppc')
groups=('network-extra')
depends=('openssl')
url='http://packages.qa.debian.org/c/ca-certificates.html'
source=("http://ftp.debian.org/debian/pool/main/c/${pkgname}/${pkgname}_${pkgver}+nmu2_all.deb")
up2date="lynx -dump  http://packages.qa.debian.org/c/ca-certificates.html | grep version: | sed 's/* version: \[\(.*\)\]\([:xdigit:]*\)/\2/'"
backup=('etc/ca-certificates.conf')
sha1sums=('0fb6e396967cea353ddf9becf5a46a921ff86aaa')

build(){
	ar x ${pkgname}_$pkgver+nmu2_all.deb || Fdie
	Fextract ./data.tar.gz
	rm -f control.tar.gz data.tar.gz debian-binary
	rm ca*

	#move files to destdir
	cp -pPR * "${Fdestdir}"/ || Fdie

	Fmkdir /etc
	echo "# Automatically generated by ${pkgname}-${pkgver}-${pkgrel}" > $Fdestdir/etc/ca-certificates.conf || Fdie
	echo "# " >> $Fdestdir/etc/ca-certificates.conf || Fdie
	Fcd /usr/share/ca-certificates
	find . -name '*.crt' | sort | cut -b3- >> $Fdestdir/etc/ca-certificates.conf
}
