# Compiling Time: 0.97 SBU
# Contributor: Janny <janny@frugalware.org>
# Maintainer: voroskoi <voroskoi@frugalware.org>

pkgname=mutt-ng
pkgver=1.5.16
pkgrel=1
pkgdesc="A well-known email client with a set of patches."
url="www.mutt.org"
groups=('network-extra')
archs=('i686' 'x86_64')
depends=('openssl' 'gdbm' 'libidn' 'gpgme' 'ncurses')
makedepends=('tetex' 'libxslt' 'docbook-xml' 'docbook-xsl')
conflicts=('mutt' 'mutt-devel')
backup=(etc/Muttrc)
up2date="lynx -dump $url/download.html |grep tar |sed -ne 's/.*-\(.*\).t.*/\1/;2p'"
source=(ftp://ftp.mutt.org/mutt/devel/mutt-$pkgver.tar.gz \
	http://ftp.frugalware.org/pub/other/sources/mutt-ng/mutt-$pkgver-patches.tar.gz)
signatures=($source.asc '')

build() 
{
	Fcd mutt-$pkgver
	for muttng in $(cat ../patches/series | cut -d ' ' -f 1)
	do
		Fpatch patches/${muttng}
	done
	autoreconf --install --include=m4 || Fdie
	Fbuild --with-docdir=/usr/share/doc/$pkgname-$pkgver --with-ssl --enable-gpgme \
	--enable-pgp --enable-smime --with-regex --enable-pop --enable-imap --enable-debug \
	--enable-nntp --enable-imap-edit-threads --enable-hcache --enable-nfs-fix \
	--enable-buffy-size --enable-mailtool --enable-compressed
	Ffilerel {PATCHES,ABOUT-NLS,OPS,OPS.{CRYPT,MIX,PGP,SMIME}} /usr/share/doc/$pkgname-$pkgver
}

# optimization OK
