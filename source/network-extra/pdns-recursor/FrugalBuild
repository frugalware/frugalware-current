# Compiling Time: 0.12 SBU
# Contributor: kikadf <kikadf.01@gmail.com>
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=pdns-recursor
pkgver=5.1.1
pkgrel=1
pkgdesc="Power DNS recursor"
url="http://www.powerdns.com/"
depends=('luajit2' 'libstdc++>=12.2' 'lua' 'curl' 'libsodium>=1.0.19' 'protobuf>=3.16.0' \
	'libsystemd' 'openssl>=3.1.0' 'libboost>=1.85.0')
makedepends=('boost' 'systemd' 'ragel' 'systemd-devel' 'libboost-static' 'rust')
groups=('network-extra')
archs=('x86_64')
backup=(etc/powerdns/recursor.conf)
_F_archive_grepv="rc\|alpha\|beta"
up2date="Flasttar http://downloads.powerdns.com/releases/"
source=(http://downloads.powerdns.com/releases/$pkgname-$pkgver.tar.bz2 \
	recursor.conf)
sha1sums=('38d2fa1af13bf2ed96d96d498189bbe48f8205c8' \
          '6d2781e079cb874b4fcb65eda44c280d1e73cbd3')
Fconfopts="	--sbindir=/usr/bin \
		--libdir=/usr/lib/pdns \
                --sysconfdir=/etc/powerdns \
                --enable-systemd \
                --with-systemd=/usr/lib/systemd/system"
 _F_make_opts+=" OPTFLAGS=''"
options=('nolto')

build()
{
	Fbuild
	Fmkdir /etc/powerdns
	Ffile /etc/powerdns/recursor.conf
}

# optimization OK
