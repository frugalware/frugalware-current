# Compiling Time: 0.44 SBU
# Maintainer: Melko <melko@frugalware.org>


pkgname=plasma-workspace
pkgver=6.1.4
pkgrel=1
pkgdesc="KDE Plasma Workspace."
groups=('plasma')
archs=("x86_64")
_F_kde_project="plasma"
Finclude kf6

depends=("kparts>=$_F_kf6_full" "krunner>=$_F_kf6_full" "knotifyconfig>=$_F_kf6_full" "knewstuff>=$_F_kf6_full" "kidletime>=$_F_kf6_full" \
	"ksvg>=$_F_kf6_full" "kdeclarative>=$_F_kf6_full" "kcmutils>=$_F_kf6_full" "prison>=$_F_kf6_full" "kpackage>=$_F_kf6_full" \
	"kholidays>=$_F_kf6_full" "kquickcharts>=$_F_kf6_full" "kunitconversion>=$_F_kf6_full" "ktexteditor>=$_F_kf6_full" \
	"plasma5support>=$_F_kdever_plasma" "libplasma>=$_F_kdever_plasma" "plasma-activities-stats>=$_F_kdever_plasma" \
	"networkmanager-qt>=$_F_kf6_full" "kuserfeedback>=$_F_kf6_full" "libksysguard>=$_F_kdever_plasma" "libkexiv2" 'libxft' \
	"baloo>=$_F_kf6_full" "kwin>=$_F_kdever_plasma" 'libqalculate>=5.0.0' 'appstream-qt' 'kirigami-addons' 'qcoro')
makedepends+=("kdoctools>=$_F_kf6_full" 'plasma-wayland-protocols' 'systemd-devel' 'qt6-base-sql-common')
signatures=("${source[0]}.sig")

subpkgs=('plasma-wayland-session')
subdescs='Plasma Wayland session'
subdepends=('xorg-server-xwayland xdg-desktop-portal-kde xdg-desktop-portal kpipewire')
subrodepends=('plasma-workspace qt6-wayland kwayland-integration iso-codes kio-fuse appmenu-gtk')
subgroups=('kde5-extra')
subarchs=("x86_64")

build() {
	Fcd
	KDE_build
	Fmkdir etc/X11
	Fmv usr/share/xsessions etc/X11/sessions
	# add back link to /xsession/ , tired to patch apps all the time for this
	Fln "/etc/X11/sessions" "/usr/share/xsessions"
	Fsplit plasma-wayland-session usr/share/wayland-sessions usr/bin/startplasma-wayland
}

# optimization OK
