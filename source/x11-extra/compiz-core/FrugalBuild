# Compiling Time: 0.42 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=compiz-core
pkgrel=5
depends=('libgl>=7.4.2-5' 'libglx>=1.6.1-7' 'libpng>=1.4.1' 'libxcomposite>=0.4.0-2' 'libxfixes>=4.0.3-4' 'libxdamage>=1.1.1-3' \
	'libxrandr>=1.3.0' 'libxinerama>=1.0.3' 'libice>=1.0.5-2' 'libsm>=1.1.0' 'startup-notification>=0.9-3' \
	'libxrender>=0.9.4-3' 'libxslt' 'dbus' 'mesa>=7.4.2-5' 'libboost>=1.46.1' 'glibmm')
makedepends=('intltool' 'perl-xml-parser' 'fixesproto' 'damageproto' 'gnome-control-center>=2.30.0' 'gconf>=2.28.1' 'metacity>=2.30.0' 'boost' 'libwnck2')
replaces=('beryl' 'beryl-manager' 'beryl-settings' 'beryl-settings-bindings' 'beryl-settings-simple' 'compiz' 'fusion-icon')
conflicts=('compiz')
provides=('compiz')
groups=('x11-extra')
archs=('i686' 'x86_64')
Finclude compiz cmake
source=(http://ftp.frugalware.org/pub/other/people/devil505/snapshots/$pkgname/$pkgname-$pkgver.tar.bz2)

sha1sums=('69283dbc335eb8fcacbace735eab97db3b3b2ffc')
_F_gnome_schemas=('etc/gconf/schemas/compiz-annotate.schemas' \
	'etc/gconf/schemas/compiz-ini.schemas' \
	'etc/gconf/schemas/compiz-blur.schemas' \
	'etc/gconf/schemas/compiz-inotify.schemas' \
	'etc/gconf/schemas/compiz-clone.schemas' \
	'etc/gconf/schemas/compiz-move.schemas' \
	'etc/gconf/schemas/compiz-commands.schemas' \
	'etc/gconf/schemas/compiz-obs.schemas' \
	'etc/gconf/schemas/compiz-compiztoolbox.schemas' \
	'etc/gconf/schemas/compiz-opengl.schemas' \
	'etc/gconf/schemas/compiz-composite.schemas' \
	'etc/gconf/schemas/compiz-place.schemas' \
	'etc/gconf/schemas/compiz-copytex.schemas' \
	'etc/gconf/schemas/compiz-regex.schemas' \
	'etc/gconf/schemas/compiz-core.schemas' \
	'etc/gconf/schemas/compiz-resize.schemas' \
	'etc/gconf/schemas/compiz-cube.schemas' \
	'etc/gconf/schemas/compiz-rotate.schemas' \
	'etc/gconf/schemas/compiz-dbus.schemas' \
	'etc/gconf/schemas/compiz-scale.schemas' \
	'etc/gconf/schemas/compiz-decor.schemas' \
	'etc/gconf/schemas/compiz-screenshot.schemas' \
	'etc/gconf/schemas/compiz-fade.schemas' \
	'etc/gconf/schemas/compiz-switcher.schemas' \
#	'etc/gconf/schemas/compiz-glib.schemas' \
	'etc/gconf/schemas/compiz-water.schemas' \
	'etc/gconf/schemas/compiz-gnomecompat.schemas' \
	'etc/gconf/schemas/compiz-wobbly.schemas' \
	'etc/gconf/schemas/compiz-imgpng.schemas' \
	'etc/gconf/schemas/compiz-zoom.schemas' \
	'etc/gconf/schemas/compiz-imgsvg.schemas' \
	'etc/gconf/schemas/gwd.schemas' )
Finclude gnome-scriptlet
unset install

subpkgs=("compiz-gnome")
subdescs=('Compiz for GNOME')
subrodepends=("$pkgname=$pkgver")
subdepends=("librsvg>=2.26.0-2 metacity>=2.34.0-3 gnome-control-center>=2.30.0 gconf>=2.28.1")
subinstall=("$_F_gnome_scriptlet")
subgroups=('gnome-extra')
subarchs=('i686 x86_64')
subreplaces=('gnome-compiz-manager')

build() {
	Fcd "core"
	CMake_build -DCOMPIZ_BUILD_WITH_RPATH=FALSE -DCOMPIZ_DEFAULT_PLUGINS="core \
	bailer detection composite opengl decor mousepoll vpswitch regex animation snap \
	expo move compiztoolbox place grid imgpng gnomecompat wall ezoom workarounds \
	staticswitcher resize fade scale session" -DCOMPIZ_PACKAGING_ENABLED=TRUE
	make install DESTDIR=$Fdestdir || Fdie
	Fmkdir usr/share/cmake-2.8/Modules
	Ffilerel ../cmake/*.cmake usr/share/cmake-2.8/Modules/
	Fmkdir etc/gconf/schemas
	Fmv usr/share/gconf/schemas/*.schemas etc/gconf/schemas/
	Frm usr/share/gconf/
	Fsplit compiz-gnome usr/bin/gtk-window-decorator
	Fsplit compiz-gnome usr/bin/unity-window-decorator
	Fexerel ../debian/compiz-decorator usr/bin/compiz-decorator
	Fsplit compiz-gnome etc/gconf/schemas/compiz-annotate.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-ini.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-blur.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-inotify.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-clone.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-move.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-commands.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-obs.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-compiztoolbox.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-opengl.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-composite.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-place.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-copytex.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-regex.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-core.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-resize.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-cube.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-rotate.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-dbus.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-scale.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-decor.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-screenshot.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-fade.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-switcher.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-water.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-gnomecompat.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-wobbly.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-imgpng.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-zoom.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-imgsvg.schemas
	Fsplit compiz-gnome etc/gconf/schemas/gwd.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-bailer.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-detection.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-debugspew.schemas
	Fsplit compiz-gnome etc/gconf/schemas/compiz-grid.schemas

	Fbuild_gnome_scriptlet
}

# optimization OK
