# Compiling Time: 0.14 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=sawfish
pkgver=1.7.1
pkgrel=2
pkgdesc="Extensible window manager written in lisp."
rodepends=('alsa-utils')
depends=('gtk+2>=2.20.0-2' 'libice>=1.0.5-2' 'libxft>=2.1.13-2' 'libxml2>=2.7.8' \
        'libxdmcp>=1.0.2-2' 'libxau>=1.0.4' 'libxdamage>=1.1.1-2' \
        'rep-gtk>=0.90.4' 'gpm')
groups=('x11-extra')
archs=('i686' 'x86_64' 'ppc')
options=('scriptlet')
url="http://sawfish.wikia.com"
dl_url="http://download.tuxfamily.org/sawfish/$pkgname"
source=($dl_url/$pkgname-$pkgver.tar.bz2)
up2date="Flastarchive $dl_url .tar.bz2"
source=(${source[@]} $pkgname-session startup xinitrc.$pkgname)
sha1sums=('d4bd4cad90ece608cef51427994ca5667ee6f939' \
          'abe3c1ce2bf78e19d7af02faa428a05a17b4431a' \
          'ac7544f73f2ea96d85cd0e9ca8a6d24d8bc2734d' \
          '182d1f6c47aa90f85568215b7f39f600067a1a64')

build()
{
	Fsed "/usr/bin/paplay" "/usr/bin/$pkgname-aplay" \
		lisp/sawfish/wm/util/play-audio.jl
	Fbuild
	Fexe  /usr/bin/$pkgname-session
	Fexe  /etc/X11/xinit/xinitrc.$pkgname
	Ffile /usr/share/$pkgname/startup
	Fln /usr/share/applications/$pkgname.desktop \
		/etc/X11/sessions/$pkgname.desktop
	Fwrapper "exec /usr/bin/aplay -q \"\$@\"" $pkgname-aplay
}

# optimization OK
