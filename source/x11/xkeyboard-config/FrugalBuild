# Compiling Time: 0.01 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=xkeyboard-config
pkgver=1.7
pkgrel=2
pkgdesc="X.org XML-based XKB configuration registry"
url="http://www.freedesktop.org/wiki/Software_2fXKeyboardConfig"
groups=('x11' 'xorg-core' 'xorg-proto')
depends=('xkbcomp>=1.0.5')
archs=('i686' 'x86_64' 'ppc')
makedepends=('pkgconfig' 'perl-xml-parser' 'util-macros>=1.2.1' 'intltool')
up2date=("lynx -dump 'http://xlibs.freedesktop.org/xkbdesc/?C=M;O=A' | grep $pkgname | Flasttar")
source=(http://xlibs.freedesktop.org/xkbdesc/$pkgname-$pkgver.tar.bz2 \
	revert-putting-altwin-super_win-into-default-mapping.patch)
#source=(http://ftp.frugalware.org/pub/other/sources/$pkgname/$pkgname-20061207.tar.bz2)
sha1sums=('d6df43bfc0596be04865f2be7c4e794e198358c8' \
          '168b05b89e08f81298f26796a914ef1dccf69c4f')

build() {
	Fcd
	Fpatchall
	Fmake --enable-xkbcomp-symlink --enable-compat-rules \
		--with-xkb-rules-symlink=xorg,evdev
	Fmakeinstall
	Fmkdir /usr/lib/X11
	Fln /usr/share/X11/xkb /usr/lib/X11/xkb
	# We still need this ? Somebody figure out pls. thx :P :) -krix-
	Fln /var/lib/xkb /usr/share/X11/xkb/compiled
}
