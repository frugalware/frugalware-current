# Compiling time: 1.67 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Old Maintainer: Bence Nagy <nagybence@tipogral.hu>

pkgname=claws-mail
pkgver=2.7.0
pkgrel=1
pkgdesc="The extended version of Sylpheed, a GTK+ based, lightweight, and fast e-mail client"
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
depends=('openssl' 'aspell' 'clamav' 'pilot-link>=0.12.1'  \
	'gtk+2'  'gpgme' 'startup-notification' 'libldap' \
	'spamassassin' 'curl' 'gdk-pixbuf' 'libetpan>=0.48' \
	'hicolor-icon-theme' 'glib2' 'db')
makedepends=('openldap')
_F_sourceforge_ext=".tar.bz2"
_F_sourceforge_dirname="sylpheed-claws"
conflicts=('sylpheed-claws')
replaces=('sylpheed-claws')
provides=('sylpheed-claws')
Finclude sourceforge
url="http://www.claws-mail.org/"
sha1sums=('b8f28c91edeeb243506e8c637bfe4aab31f438c0')

build()
{
	Fmake \
		--enable-aspell --enable-ldap \
		--enable-spamassassin-plugin \
		--with-config-dir=.sylpheed-claws
	## we keep .sylpheed-claws as config dir as last for 0.6
	## to not break the update from 0.5 and current. Should be removed in 0.7
	## current
	cd tools
	make || Fdie
	for tool in *.pl *.py *.rc *.sh tb2* update-po uudec; do
    		Fexerel /usr/lib/claws-mail/tools/${tool}
	done
	Ffilerel /usr/lib/claws-mail/tools/multiwebsearch.conf
	cd ..
	Ffilerel claws-mail-64x64.png /usr/share/pixmaps/claws-mail.png
	Fmakeinstall
	Ffilerel claws-mail.png /usr/share/icons/hicolor/48x48/apps/claws-mail.png
	Ffilerel claws-mail.desktop /usr/share/applications/claws-mail.desktop
}

# optimization OK
