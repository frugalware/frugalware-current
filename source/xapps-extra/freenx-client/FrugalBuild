# Compiling Time: 0.16 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=freenx-client
pkgver=0.9
pkgrel=3
pkgdesc="Contains client libraries and executables for connecting to an NX server."
_F_berlios_dirname="freenx"
_F_berlios_ext=".tar.bz2"
Finclude berlios
depends=('dbus' 'libqtxml>=4.6.2-3' 'libqtgui>=4.6.2-3' 'libice' 'libxrender' 'libxext')
makedepends=('doxygen')
replaces=('knx')
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="Flasttar http://developer.berlios.de/project/showfiles.php?group_id=2978"
source=($source freenx-client-0.9-fixes.patch)
sha1sums=('cbe7f4d4c83e435d74192a07290a42cd42cb6242' \
          'd246e3ad35d742f2680a05c4425b15e130bdd2d5')

build()
{
	Fpatchall
	cat >> qtnx/qtnx.pro << EOF
QMAKE_CXXFLAGS += -I`pwd`/nxcl/lib
LIBS += -L`pwd`/nxcl/lib -lnxcl
EOF
	mv nxcl/README README.nxcl || return 1
	mv qtnx/README README.qtnx || return 1
	cd nxcl || return 1
	Fautoreconf
	Fmake --disable-static
	Fmakeinstall
	cd ../qtnx || return 1
	qmake || return 1
	Fmake
	Fexerel /usr/bin/qtnx
}

# optimization OK
