# Compiling Time: 12.85 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: Devil505 <devil505linux@gmail.com>

pkgname=gmic
pkgver=2.9.1
pkgrel=1
pkgdesc="Image procession framework"
depends=('curl' 'opencv>=4.3.0')
makedepends=('x11-protos')
groups=('xapps-extra')
archs=('x86_64')
url="https://gmic.eu"
Fpkgversep="_"
up2date="Flasttar $url/files/source/"
source=("$url/files/source/gmic_$pkgver.tar.gz")
sha1sums=('e7c6568f06f1aad020af0c90593ce1b9bdcfd1cd')
_F_cd_path="gmic-$pkgver"

subpkgs+=("gimp-plugin-gmic")
subdescs+=("Gimp plugin for the GMIC image procession framework")
subdepends+=("gimp qt5-base")
subgroups+=('xapps-extra')
subarchs+=('x86_64')

build()
{
	Fcd
	Fpatchall

	make -C src all  WGET=/bin/true -j1 || Fdie
	make -C src install DESTDIR="$Fdestdir" USR=/usr || Fdie

	# gimp plugin
	Fsplit gimp-plugin-gmic usr/lib/gimp/2.0/plug-ins/gmic_gimp_qt
}


# optimization OK
