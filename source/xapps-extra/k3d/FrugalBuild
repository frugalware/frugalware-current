# Compiling Time: 24.48 SBU
# Maintainer: crazy <crazy@frugalware.org>
# Contributor: Mcklaren <mcklaren@gmail.com>

pkgname=k3d
pkgver=0.6.5.0
pkgrel=1
pkgdesc="A complete free-as-in-freedom 3D modeling, animation and rendering system."
depends=('gtkglext' 'imagemagick' 'librsvg' 'gts' 'python>=2.5' 'openexr>=1.4.0a' 'libxml2' 'libsigc++2'  'freetype2' \
	'plib' 'graphviz' 'libtiff' 'atk' 'gtkmm' 'pango' 'glibmm' 'boost>=1.33.1-2')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet' 'force')
_F_sourceforge_ext="-src.tar.bz2"
Finclude sourceforge
url="http://www.k-3d.org/"
up2date="lynx -dump http://sourceforge.net/project/showfiles.php?group_id=11113|grep -m1 'k3d-\(.*\)-src.tar.bz2'|sed 's/.*3d-\(.*\)-src.*/\1/'"
source=(${source[@]} external-boost_mt.patch)
sha1sums=('c58f99669ffa48963e8fbdde5cf920726c3786e6' \
          'a5447d050ed0830865754e282ee41d4215c2c932')


build()
{
	Fcd
	Fpatchall
	if [ "$CARCH" == "x86_64" ]; then
		myconf="--disable-python"
	fi
	rm -f configure || return 1
	libtoolize --force --automake || return 1
	aclocal -I m4 || return 1
	automake --add-missing || return 1
	autoconf || return 1
	Fconf  	--with-external-boost \
		--with-nls \
		--without-gnome --disable-gnome \
		--enable-gnome=no --with-graphviz \
		--with-libxml2 $myconf
	make || return 1
	Fmakeinstall
}

# optimization OK
