# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=mangohud
pkgver=0.2.0
pkgrel=1
_imgui_commit='6c1a73774dabd2be64f85543b1286e44632d1905'
pkgdesc="Vulkan overlay layer for monitoring FPS, temperatures, CPU/GPU load and more"
archs=('x86_64')
groups=('xapps-extra')
depends=('libx11' 'vulkan-icd-loader')
makedepends=('x11-protos' 'vulkan-headers' 'glslang' 'python3-mako' 'libglvnd' 'git')
_F_cross32_use_meson=y
_F_cross32_simple_auto="yes"
_F_meson_confopts="	 -Duse_system_vulkan=enabled"
_F_github_author="flightlessmango"
_F_github_tag_v=y
Finclude github cross32
source+=("https://github.com/flightlessmango/imgui/archive/$_imgui_commit.tar.gz")
sha1sums=('97903f003e5db12eba5d034acb834278523fca9d' \
          '697134a4d88c7cf2a8c07616e8cee29f87d53d8e')
_F_cd_path="MangoHud-$pkgver"

build() {
	Fcd
	Fexec rm -rf modules/ImGui/src
	Fexec ln -sr "$Fsrcdir/imgui-$_imgui_commit" modules/ImGui/src
	Fbuild_cross32
	Fmv usr/share/vulkan/implicit_layer.d/mangohud.json usr/share/vulkan/implicit_layer.d/mangohud64.json
	Fsubmv lib32-$pkgname usr/share/vulkan/implicit_layer.d/mangohud.json usr/share/vulkan/implicit_layer.d/mangohud32.json	
}


# optimization OK
