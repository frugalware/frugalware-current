# Compiling Time: 26.46 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=openscad
pkgver=2019.05
pkgrel=10
pkgdesc="Software for creating solid 3D CAD objects."
archs=('x86_64')
groups=('xapps-extra')
license=('GPLv2')
url="http://www.openscad.org/"
depends=('opencsg>=1.4.2-3' 'qt5-multimedia>=5.15.0' \
	'qscintilla2-qt5>=2.11.1' 'libboost>=1.74.0' 'libzip' 'double-conversion')
makedepends=('eigen' 'boost>=1.74.0' 'x11-protos' 'cgal' 'bison')
Finclude github
_F_archive_grepv="RC"
up2date="Flastarchive http://files.openscad.org .src.tar.gz"
_F_cd_path="$pkgname-$pkgname-$pkgver"
source+=(cgal-5.0.patch \
	boost-1.72.patch \
	boost-1.73.patch)
sha1sums=('3817758e0c7299dbfbe340cdae0fe39da915c799' \
          '47257d930bbf8f26b699391e8419df2217db5173' \
          '5d0ffbedbb286a6acb5dc91d0c8559cc161e84b0' \
          '28f9dc3923c632a9b09e7432a8d5cee9236152cd')

build() {
	Fcd

	Fpatchall
	Fexec qmake-qt5  QMAKE_LFLAGS="$LDFLAGS" QMAKE_CXXFLAGS="$CXXFLAGS" PREFIX="/usr" || Fdie
	Fmake
	INSTALL_ROOT="${Fdestdir}" make install || Fdie
}

# optimization OK
