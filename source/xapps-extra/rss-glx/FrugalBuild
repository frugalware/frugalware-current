# Compiling Time: 0.19 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=rss-glx
Fpkgversep="_"
pkgver=0.8.1
pkgrel=4
pkgdesc="Really Slick Screensavers written in OpenGL"
depends=('libglx' 'libgl' 'mesa' 'openal>=1.7.411' 'imagemagick>=6.4.8_9' 'xscreensaver')
makedepends=('gnome-screensaver')
groups=('xapps-extra')
archs=('i686' 'x86_64')
_F_sourceforge_ext=".tar.bz2"
Finclude sourceforge
url="http://rss-glx.sourceforge.net"
source=(${source/-$pkgver/_$pkgver} gcc43.patch rss-glx-0.8.1-imagemagick.patch)
up2date="lynx -dump http://rss-glx.sourceforge.net/ | Flasttar"
sha1sums=('188871d7940de8a7c3f9e622ddc131e46567eab5' \
          '46f1753be0fe0993856cf437f7b7e697953cf3dc' \
          '7ad7acb7d97880df33e7a57a20b10c60617927de')

build() {
	Fcd ${pkgname}_${pkgver}
	sh ./autogen.sh || Fdie
	Fbuild

	cd $Fdestdir/usr/bin
	Fmkdir /usr/libexec/xscreensaver
	for file in *; do
		Fmv /usr/bin/$file /usr/libexec/xscreensaver/
	done
	cd ..
	rmdir bin

	Fmkdir /usr/share/applications/screensavers
	cd $Fdestdir/usr/share/applications/screensavers
	for i in $Fdestdir/usr/share/xscreensaver/config/*; do
		/usr/bin/xscreensaver2gnome $i
	done
}
