# Compiling Time: 1.21 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=texstudio
pkgver=2.11.0 ## .2 is there but not an tarball for Linux ?!?!
pkgrel=2
pkgdesc="Fork of the LaTeX IDE TexMaker. Gives you an environment where you can easily create and manage LaTeX documents"
url="http://sourceforge.net/projects/texstudio"
depends=('qt5-svg>=5.7.0-2' 'poppler-qt5>=0.47.0' 'hunspell' 'qt5-script>=5.7.0-2' 'qt5-base>=5.7.0-3')
makedepends=('x11-protos' 'qt5-tools>=5.7.0-2')
groups=('xapps-extra')
archs=('i686' 'x86_64')
up2date="lynx -dump http://www.texstudio.org/ | sed -n 's/\s\+\([^ ]\+\) .*source tarball.*/\1/p'"
source=($url/files/texstudio/TeXstudio%20$pkgver/$pkgname-$pkgver.tar.gz)
_F_cd_path="$pkgname$pkgver"
sha1sums=('3d2f8709275562b63b61f52d99c27b6645f29285')
_F_gnome_iconcache="y"
Finclude gnome-scriptlet

build() {
	Fcd
	qmake-qt5 USE_SYSTEM_HUNSPELL=1  texstudio.pro || Fdie
	Fmake
	make INSTALL_ROOT=$Fdestdir install || Fdie
	Fbuild_gnome_scriptlet

	## icons ..
	local size

	for size in 22 32 48 64 128; do
		Finstallrel 644 "utilities/texstudio${size}x${size}.png" \
			"usr/share/icons/hicolor/${size}x${size}/apps/$pkgname.png"
	done

}

# optimization OK
