# Compiling Time: 0.08 SBU
# Maintainer: Priyank Gosalia <priyankmg@gmail.com>

pkgname=transmission
pkgver=2.04
pkgrel=1
pkgdesc="A free, lightweight BitTorrent Client."
url="http://transmission.m0k.org/"
makedepends=('intltool')
depends=('glibc' 'gtk+2>=2.20.0-2' 'libxml2' 'freetype2' 'libxau>=1.0.4' 'libxdmcp>=1.0.2-2' \
	'curl>=7.19.0' 'libxdamage>=1.1.1-3' 'libxext>=1.0.5-3' 'gettext' 'libevent' 'openssl>=1.0.0')
options=('scriptlet')
groups=('xapps-extra')
archs=('i686' 'x86_64')
options=('scriptlet')
up2date="lynx -dump -nolist http://download.m0k.org/transmission/files/ | Flasttarbz2"
source=(http://download.m0k.org/transmission/files/$pkgname-$pkgver.tar.bz2)
sha1sums=('301e22eeeb985782b61202deb1c36a883357fcc6')

build()
{
	Fcd
	if [ "$CARCH" == "x86_64" ]; then
		export CFLAGS="$CFLAGS -fPIC"
	fi
	Fconf
	make || Fdie

	# Install binaries and manpages
	cd cli || Fdie
	Fexerel /usr/bin/transmissioncli
	Fmanrel transmissioncli.1
	cd ../gtk || Fdie
	Fexerel /usr/bin/transmission
	Fmanrel transmission.1

	# Desktop entry
	Fmkdir /usr/share/{applications,pixmaps}
	Ffilerel transmission.desktop /usr/share/applications/
	Ffilerel transmission.png /usr/share/pixmaps
}

# optimization OK

