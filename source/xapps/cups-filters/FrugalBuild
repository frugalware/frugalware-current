# Compiling time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

pkgname=cups-filters
pkgver=1.28.16
pkgrel=3
pkgdesc="Backends, filters and other software from CUPS distribution."
url="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/group"
depends=('avahi-glib' 'qpdf>=11.1.0' 'poppler>=0.62.0' 'ijs>=0.35-5' \
	'poppler-pdftools>=0.62.0' 'mupdf' 'libcups' 'libexif')
makedepends=('x11-protos' 'cups' 'ghostscript' 'gettext' 'dejavu-ttf')
archs=("x86_64")
groups=('xapps')
source=(http://www.openprinting.org/download/$pkgname/$pkgname-$pkgver.tar.xz)
up2date="Flasttar 'http://www.openprinting.org/download/$pkgname/'"
sha1sums=('51d89a424d727151dc0d2a80fc5b1623bcedd41f')

Fconfopts+="	--enable-static \
		--disable-silent-rules \
		--with-pdftops=hybrid \
		--enable-dbus \
		--with-rcdir=no \
		--enable-avahi \
		--with-browseremoteprotocols=DNSSD,CUPS \
		--enable-auto-setup-driverless"

_Fbuild_autoreconf=yes

build() {
	Fbuild

	## do not ever remove
	Fexec chgrp -R lp $Fdestdir/etc/cups

	# conflit with foomatic-filters
	Frm usr/bin/foomatic-rip
	Frm usr/lib/cups/filter/foomatic-rip
	Frm usr/share/man/man1
	Frm usr/lib/cups/backend/beh

	Finstallrel 644 utils/cups-browsed.service lib/systemd/system/cups-browsed.service
}
# optimization OK

