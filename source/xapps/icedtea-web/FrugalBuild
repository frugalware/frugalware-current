# Compiling Time: 0.78 SBU
# Maintainer: Marius Cirsta <mcirsta@frugalware.org>
# Contributor: Miklos Vajna <vmiklos@frugalware.org>

pkgname=icedtea-web
pkgver=1.6.1
pkgrel=1
pkgdesc="Provides a Free Software web browser plugin running applets written in Java."
url="http://icedtea.classpath.org/wiki/IcedTea-Web"
depends=('openjre' 'gtk+2')
makedepends=('openjdk' 'zip' 'firefox' 'x11-protos')
Finclude openjava
groups=('xapps')
archs=("x86_64")
up2date="Flasttar http://icedtea.classpath.org/download/source/"
source=(http://icedtea.classpath.org/download/source/icedtea-web-$pkgver.tar.gz)
sha1sums=('1e7d8f9a57ba94b4db1a3d6a5b46b69ba77994e0')

build()
{
	export MOZILLA_CFLAGS='-I/usr/include/firefox'
	export MOZILLA_LIBS='-L/usr/lib/firefox'
	Fmkdir /usr/lib/jvm/java-7-openjdk/jre/share/icedtea-web
	Fbuild --with-jdk-home=$OPENJDKDIR \
	       --prefix=$OPENJREDIR

	Fmkdir /usr/lib/mozilla/plugins
	Fln $OPENJREDIR/lib/IcedTeaPlugin.so \
	    /usr/lib/mozilla/plugins/IcedTeaPlugin.so
}

# optimization OK
