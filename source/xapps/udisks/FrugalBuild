# Compiling time: 0.07 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=udisks
pkgver=1.0.5
pkgrel=1
pkgdesc="Storage Management Service"
url="http://www.freedesktop.org/wiki/Software/udisks"
depends=('dbus-glib' 'polkit' 'parted>=3.1-2' 'lvm2>=2.02.96' \
	'libatasmart>=0.19' 'sg3-utils' 'e2fsprogs' 'dosfstools' 'mtools' \
	'libgudev' 'elfutils')
makedepends=('intltool')
Fconfopts+=" --disable-man-pages --enable-lvm2 --datadir=/usr/lib"
groups=('xapps')
archs=("x86_64")
up2date="Flasttar http://hal.freedesktop.org/releases/"
source=(http://hal.freedesktop.org/releases/$pkgname-$pkgver.tar.gz \
	udisks-1.0.4-drop-pci-db.patch \
	udisks_fix_build_with_glibc220.patch)
sha1sums=('cdc254579a32a6c7b9e94758bb55d544bb807bf5' \
          '85121f859c0a13e744f34948826a26f6527f5388' \
          'ac8acfc97aadb0142d19481b072e921ea85e763b')
replaces=('devicekit-disks')

build()
{
	Fbuild
	Frm /var/run
	Fmkdir /etc/tmpfiles.d
	cat > $Fdestdir/etc/tmpfiles.d/udisks.conf << EOF
d $Flocalstatedir/run/udisks 0700 root root -
EOF
}

# optimization OK
