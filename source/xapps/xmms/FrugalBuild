# Compiling Time: 0.80 SBU
# Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=xmms
pkgver=1.2.10
pkgrel=13
pkgdesc="The X MultiMedia System"
url="http://www.xmms.org"
depends=('gtk+' 'libvorbis' 'alsa-lib' 'libmikmod')
makedepends=('esd' 'libglx' 'mesa')
groups=('xapps')
archs=('i686' 'x86_64')
provides=('songplayer')
up2date="lynx -dump http://www.xmms.org/download.php|grep ^XMMS|cut -d ' ' -f 2"
source=(http://www.xmms.org/files/1.2.x/$pkgname-$pkgver.tar.bz2 \
	$pkgname.desktop \
	http://ftp.frugalware.org/pub/other/sources/xmms/xmms-cvs-20070427-backport.patch.bz2 \
	xmms-1.2.10-cvs-fw.patch SA23986.diff)
[ "$CARCH" == "x86_64" ] && confopts=--disable-simd
[ "$CARCH" != "x86_64" ] && confopts=--enable-simd

build() {
	Fpatchall
	chmod +x $Fsrcdir/$pkgname-$pkgver/po/update.pl || Fdie
	sh autogen.sh || Fdie
	Fmake $confopts
	Fmakeinstall
	Ffile /usr/share/applnk/Multimedia/xmms.desktop
}

sha1sums=('a3c3d3756d5263183c27b3c50a7f5404cba8bfaf'\
          'af83776c2704f950957b161b1f408d4e17130c69'\
          '8fb12ff8b74c8dbc6222f2e13e21b2bb8542cd1b'\
          '7d5c91904c0c93bc058ead66aac36d955652683b'\
          'b1d3a803950ce4d83090a43d5b076afd48c135b5')
# optimization OK
