diff -Naur OpenShadingLanguage-Release-1.11.17.0/src/liboslexec/llvm_util.cpp OpenShadingLanguage-Release-1.11.17.0.new/src/liboslexec/llvm_util.cpp
--- OpenShadingLanguage-Release-1.11.17.0/src/liboslexec/llvm_util.cpp	2022-01-08 03:36:45.000000000 +0100
+++ OpenShadingLanguage-Release-1.11.17.0.new/src/liboslexec/llvm_util.cpp	2022-08-11 17:50:44.449882099 +0200
@@ -37,7 +37,11 @@
 #include <llvm/Support/raw_os_ostream.h>
 #include <llvm/IR/LegacyPassManager.h>
 #include <llvm/IR/ValueSymbolTable.h>
+#if OSL_LLVM_VERSION < 140
 #include <llvm/Support/TargetRegistry.h>
+#else
+#include <llvm/MC/TargetRegistry.h>
+#endif
 
 #include <llvm/Bitcode/BitcodeReader.h>
 #include <llvm/Bitcode/BitcodeWriter.h>
