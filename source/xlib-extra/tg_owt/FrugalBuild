# Compiling Time: 0.01 SBU
# Maintainer: DeX77 <dex77@frugalware.org>

pkgname=tg_owt
pkgver=20220101.g6708e0d
pkgrel=9
pkgdesc='WebRTC build for Telegram'
archs=('x86_64')
groups=('xlib-extra')
depends=('protobuf>=21.5' 'pipewire' 'libxrandr' 'libxcomposite' 'libxdamage' 'abseil-cpp')
makedepends=('libjpeg-turbo' 'ffmpeg>=5.0' 'opus' 'yasm' 'x11-protos')
_F_github_author="desktop-app"
_F_github_devel=y
_F_scm_want_up2date=yes
_F_cmake_use_ninja=true
_F_scm_git_cloneopts="--recurse-submodules"
Finclude github cmake
options=('static' 'force')
source=(ffmpeg5.patch)
sha1sums=('8eea93f77040591c1127f5d16d1256b0fba07c2f')

build() {
	Funpack_scm
	Fcd
	Fexec git checkout 575fb17d2853c43329e45f6693370f5e41668055 || Fdie
	Fexec git submodule update --recursive || Fdie
	CMake_build
}

# optimization OK
