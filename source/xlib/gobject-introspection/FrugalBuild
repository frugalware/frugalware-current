# Compiling Time: 0.81 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>

USE_DOC=${USE_DOC:-"n"}

pkgname=gobject-introspection
pkgver=1.70.0
pkgrel=5
pkgdesc="Generate interface introspection data for GObject libraries."
depends=('glib2>=2.70.2' 'libffi>=3.4' 'python3>=3.11')
makedepends=('cairo>=1.14.12-4' 'libxft' 'python>=2.7.12-3')
groups=('xlib')
archs=("x86_64")
_F_gnome_ext=".tar.xz"
Finclude gnome meson
source+=(meson-fix.patch)
sha1sums=('ed436f1c5c4519f7f86e9217b964183b32ac73b1' \
          '91de693752518a26f2cc163b24bd2775a14d38f7')
replaces=('gir-repository')
if Fuse $USE_DOC; then
        makedepends=("${makedepends[@]}" 'gtk-doc>=1.24')
        Fconfopts+=" --enable-gtk-doc"
        subpkgs=("$pkgname-docs")
        subdescs=("Gobject-introspection Documentation")
        subdepends=()
        subgroups=('docs-extra')
        subarchs=("x86_64")
fi


build() {
		Meson_build
        if Fuse $USE_DOC; then
                Fsplit $pkgname-docs usr/share/gtk-doc
        fi
}

# optimization OK
