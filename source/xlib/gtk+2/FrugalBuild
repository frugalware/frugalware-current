# Compiling time: 11.61 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=gtk+2
_F_gnome_name=gtk+
pkgver=2.24.31
pkgrel=2
pkgdesc="The GTK+ Toolkit (2.x series)"
depends=('pango>=1.40.3-2' 'libcups>=2.2.0-2' 'gdk-pixbuf2>=2.36.0' 'libffi>=3.2.1-2' 'libpng>=1.6.25')
rodepends=('adwaita-icon-theme' 'shared-mime-info' 'gtk+2-libs')
groups=('xlib')
makedepends=('gtk-doc' 'cups>=2.2.0-2' 'gobject-introspection>=1.49.2' 'shared-mime-info')
archs=("x86_64")
replaces=('libgail-gnome')
provides=('libgail-gnome')
_F_gnome_ext=".tar.xz"
Finclude gnome
up2date=$pkgver
url="http://www.gtk.org/"
_F_cd_path="gtk+-$pkgver"
source=($source xid-collision-debug.patch gtkrc)
sha1sums=('c3d828135994a52cc9428a60175bd2b294656611' \
          '75c461740e18696a792739cd1f9a20327dbb23bb' \
          'a11a695c99225a802860ceabaf670101d1aef9dc')

subpkgs=("${subpkgs[@]}" "$pkgname-libs")
subdescs=("${subdescs[@]}" "GTK+2 core libraries.")
subdepends=("${subdepends[@]}" "pango>=1.40.3-2 libxinerama>=1.1.3-3 libxi>=1.7.6-2 libxrandr>=1.5.0-5 \
	libxcursor>=1.1.14-3 libxcomposite>=0.4.4-3 gdk-pixbuf2>=2.36.0  atk>=2.22.0")
subrodepends=("${subrodepends[@]}" "")
subconflicts=("${subconflicts[@]}" "")
subgroups=("${subgroups[@]}" 'xlib')
subarchs=("x86_64")


subpkgs=("${subpkgs[@]}" "gail")
subdescs=("${subdescs[@]}" "Accessibility support for GTK+2 and libgnomecanvas")
subdepends=("${subdepends[@]}" "pango>=1.40.3-2  gdk-pixbuf2>=2.36.0  atk>=2.22.0 \
	libffi>=3.2.1-2 libpng>=1.6.25")
subrodepends=("${subrodepends[@]}" "$pkgname-libs>=$pkgver")
subconflicts=("${subconflicts[@]}" "")
subgroups=("${subgroups[@]}" 'xlib')
subarchs=("x86_64")

subpkgs=("${subpkgs[@]}" "$pkgname-docs")
subdescs=("${subdescs[@]}" "GTK+2 Documentation.")
subdepends=("${subdepends[@]}" "")
subrodepends=("${subrodepends[@]}" "")
subconflicts=("${subconflicts[@]}" "")
subgroups=("${subgroups[@]}" 'gnome-extra docs-extra')
subarchs=("x86_64")

subpkgs=("${subpkgs[@]}" "$pkgname-demos")
subdescs=("${subdescs[@]}" "GTK+2 Demos.")
subdepends=("${subdepends[@]}" "")
subrodepends=("${subrodepends[@]}" "$pkgname>=$pkgver")
subconflicts=("${subconflicts[@]}" "pango>=1.40.3-2  gdk-pixbuf2>=2.36.0 libffi>=3.2.1-2 libpng>=1.6.25")
subgroups=("${subgroups[@]}" 'xapps-extra')
subarchs=("x86_64")

build() {
	Fcd
	Fpatchall
	Fautoreconf
	Fmake \
		--with-xinput=yes \
		--enable-gtk-doc \
		--enable-man \
		--with-gdktarget=x11 \
		--disable-dependency-tracking \
		--with-x
	Fmakeinstall

	#Split gail
	Fsplit gail usr/include/gail-*
	Fsplit gail usr/lib/gtk-2.0/modules/libferret*
	Fsplit gail usr/lib/gtk-2.0/modules/libgail*
	Fsplit gail usr/lib/libgailutil*
	Fsplit gail usr/lib/pkgconfig/gail.pc
	Fsplit gail usr/share/gtk-doc/html/gail*

	## libs
	Fsplit $pkgname-libs usr/lib/lib*-x11*
	Fsplit $pkgname-libs usr/lib/pkgconfig/g*-x11-*.pc

	Frm usr/bin/gtk-update-icon-cache
	Frm usr/share/man/man1/gtk-update-icon-cache*

	## -demos
	Fsplit $pkgname-demos usr/share/gtk-2.0/demo
	Fsplit $pkgname-demos usr/bin/*-demo*

	Fcp gtkrc usr/share/gtk-2.0/gtkrc
	Fsplit $pkgname-docs usr/share/gtk-doc
}

# optimization OK
