# Compiling time: 0.89 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>

pkgname=poppler
pkgver=0.6
pkgrel=2sayshell1
pkgdesc="A PDF rendering library"
url="http://poppler.freedesktop.org/"
depends=('libxext' 'fontconfig' 'libstdc++' 'cairo' 'libjpeg' 'libxrender' 'libpng')
makedepends=('qt' 'gtk+2>=2.12.0' 'gtk-doc' 'qt4')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump http://poppler.freedesktop.org/releases.html|grep tar.gz|sed -n 's/.*-\(.*\)\.t.*/\1/;1 p'"
source=(http://poppler.freedesktop.org/$pkgname-$pkgver.tar.gz \
	01-poppler.conf SA27553.diff crash_fix.diff)
options=('scriptlet')

subpkgs=('poppler-glib' 'poppler-qt' 'poppler-pdftools' 'poppler-qt4')
subdescs=('Poppler glib/GTK+ bindings' 'Poppler QT bindings' 'poppler xpdf tools' 'Poppler QT4 bindings')
subgroups=('gnome' 'kde' 'xapps' 'kde-extra')
subdepends=('poppler pango gtk+2' 'poppler qt' 'poppler' 'poppler qt4')
subarchs=('i686 x86_64' 'i686 x86_64' 'i686 x86_64' 'i686 x86_64')

build() {
	Fbuild --enable-a4-paper --enable-qt --enable-gtk-doc \
		--enable-xpdf-headers --enable-zlib
	Ffile 01-poppler.conf /etc/fonts/conf.avail/01-poppler.conf
	Fln /etc/fonts/conf.avail/01-poppler.conf /etc/fonts/conf.d/01-poppler.conf
	Fsplit poppler-pdftools usr/bin/*
	Fsplit poppler-pdftools usr/share/man/man1/*
	Fsplit poppler-glib usr/lib/libpoppler-glib*
	Fsplit poppler-glib usr/include/poppler/glib/
	Fsplit poppler-glib usr/lib/pkgconfig/poppler-glib.*
	Fsplit poppler-qt usr/lib/libpoppler-qt.*
	Fsplit poppler-qt usr/lib/pkgconfig/poppler-qt.*
	Fsplit poppler-qt usr/include/poppler/qt3/
	Fsplit poppler-qt4 usr/lib/libpoppler-qt4.*
	Fsplit poppler-qt4 usr/lib/pkgconfig/poppler-qt4.*
	Fsplit poppler-qt4 usr/include/poppler/qt4/
}
sha1sums=('a40abb17b912d6ecd0e4ece609b74647b8d04279' \
          'a048348d9a8c6d545714350d3ab66dc7028e4b7f' \
          'b35c086f95b2af31b344d76070bffe35537b1df9' \
          'bc36fc906a8842483cc0f9be207958c2d71486c0')

# optimization OK
