# Compiling Time: 4.48 SBU
# Maintainer: Melko <melko@frugalware.org>

pkgname=telepathy-qt5
_F_archive_name=telepathy-qt
pkgver=0.9.7
pkgrel=2
pkgdesc="Telepathy Qt5 bindings"
groups=('xlib')
archs=('i686' 'x86_64')
depends=('qt5-base>=5.6.0-3' 'telepathy-farstream>=0.6.2-4' 'farstream>=0.2.8' 'dbus-glib' 'qt5-qdbus' 'libproxy' 'dbus-python')
options+=('static')
Finclude cmake
url="http://telepathy.freedesktop.org/wiki/Telepathy-Qt4"
up2date="Flasttar http://telepathy.freedesktop.org/releases/$_F_archive_name"
source=(https://github.com/TelepathyQt/telepathy-qt/archive/master.zip fix-qt5-glib-detection.patch)
sha1sums=('238ebde7b990cab629380212b0e104fd50285d47' \
          'fe893dcc13527e952f611797de4378c1df2cecdf')

replaces=('telepathy-qt4')
conflicts=('telepathy-qt4')

_F_cd_path="telepathy-qt-master"

build(){
       CMake_prepare_build
       cmake  \
		-DCMAKE_BUILD_TYPE=Release \
		-DENABLE_TESTS=OFF \
		-DENABLE_EXAMPLES=OFF \
		-DDISABLE_WERROR=ON \
		-DDESIRED_QT_VERSION=5 \
		-DCMAKE_INSTALL_PREFIX=/usr .. || Fdie
       make || Fdie
       CMake_install
}

# optimization OK
