# Compiling Time: 1.65 SBU
# Maintainer: Christian Hamar alias krix <krics@linuxforum.hu>
# Old Maintainer: VMiklos <vmiklos@frugalware.org>

pkgname=xscreensaver
pkgver=5.01
pkgrel=1
pkgdesc="A screen saver and locker for the X Window System."
url="http://www.jwz.org/xscreensaver"
rodepends=('xscreensaver-data')
depends=('freetype2' 'libglade' 'gtk+2' 'libxml2' 'expat' 'libxxf86misc' 'libxpm')
makedepends=('bc')
groups=('xlib')
archs=('i686' 'x86_64')
up2date="lynx -dump $url/download.html |grep ]$pkgname|sed -ne 's/.*r-\(.*\)\.t.*/\1/;1 p'"
source=($url/$pkgname-$pkgver.tar.gz $pkgname-4.22-head.diff)
sha1sums=('c371241c54f4c4cc2dd670852e39f212da3ca991' \
	  'aff9f153023249c8c82bfaf35f1552610747de78')

subpkgs=('xscreensaver-data')
subdescs=('Screensavers for Xscreensaver')
subdepends=('libgl libxxf86misc libxpm libx11 libxdmcp libxau')
subgroups=('xlib')
subarchs=('i686 x86_64')

build()
{
	Fpatchall
	Fmake --with-shadow --with-jpeg --with-gl --without-pam
	make install_prefix=$Fdestdir install || Fdie
	# this can be removed after Frugalware 0.6 is out (and we no longer
	# need the compat manpage)
	Fmv /usr/share/man/man6/pacman.6 /usr/share/man/man6/$pkgname-pacman.6
       	Fmv /usr/share/man/man6/barcode.6 /usr/share/man/man6/$pkgname-barcode.6
	Fmkdir /usr/share/wallpapers
	
	Fsplit xscreensaver-data /usr/share/man/man6
	Fsplit xscreensaver-data /usr/libexec/xscreensaver
	Fsplit xscreensaver-data /usr/share/xscreensaver/config
}

# optimization OK
