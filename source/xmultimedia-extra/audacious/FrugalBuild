# Compiling Time: 0.37 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=audacious
pkgver=2.4.3
pkgrel=1
pkgdesc="Audacious is a fork from BMP 0.9.7.1"
url="http://audacious-media-player.org"
depends=('dbus-glib' 'gtk+2>=2.20.0-2' 'libxau' 'libxdmcp' 'libmcs>=0.7.1-2' 'libxext>=1.0.5-3' \
	'libstdc++' 'libxdamage>=1.1.1-3' 'libice>=1.0.5-2' 'util-linux-ng')
rodepends=('audacious-plugins')
groups=('xmultimedia-extra')
_F_gnome_iconcache=y
Finclude gnome-scriptlet
archs=('i686' 'x86_64')
options=('scriptlet' 'force' 'genscriptlet')
conflicts=('bmp' 'bmp-docklet' 'bmp-mac')
replaces=('bmp' 'bmp-docklet' 'bmp-mac')
up2date="lynx -dump '$url/downloads' | grep -o '$pkgname-\(.*\).tgz' | tail -n2 | head -n1 | sed 's|$pkgname-\(.*\).tgz|\1|'"
source=(http://distfiles.atheme.org/$pkgname-$pkgver.tgz)
sha1sums=('81fd26c9488c543beb4ba2900a667ed386e63ef3')

build()
{
	if [ "$CARCH" == "i686" ]; then
		opts="--disable-sse2"
	fi
	Fbuild \
		--enable-chardet \
		--disable-dependency-tracking \
		$opts
  # Remove the following lines if upstream ever fixes these symlinks
  Frm /usr/bin/aud{tool,acious}
  Fln /usr/bin/audtool{2,}
  Fln /usr/bin/audacious{2,}
  Fbuild_gnome_scriptlet
}

# optimization OK
