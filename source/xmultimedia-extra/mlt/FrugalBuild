# Compiling Time: 0.29 SBU
# Maintainer: DeX77 <dex77@frugalware.org>
# Contributor: crazy <crazy@frugalware.org>

pkgname=mlt
pkgver=7.18.0
pkgrel=1
pkgdesc="MLT is an open source multimedia framework, designed and developed for television broadcasting."
depends=('libsamplerate' 'alsa-lib>=1.1.2-2' 'libdv' 'libxcb>=1.12-2' 'ffmpeg>=6.0' 'libmad' 'libatomic' \
	'libexif>=0.6.21-3' 'libdv' 'libvorbis' 'lame' 'libogg' 'frei0r-plugins>=1.5.0-2' 'sox>=14.3.2-2' 'exiv2')
makedepends=('jack>=0.118.0' 'libxml2>=2.9.4-3' 'sdlimage>=1.2.12-3' 'zlib>=1.2.12' 'ladspa_sdk' 'swig' 'x11-protos')
groups=('xmultimedia-extra')
archs=('x86_64')
options=('scriptlet')
_F_github_author="mltframework"
_F_github_tag_v=y
Finclude github cmake
sha1sums=('e581a370ea0ab4b8e34069b7c951866496340e75')

## FIXME
subpkgs=("$pkgname-qt" "$pkgname-sdl" "$pkgname-jack")
subdescs=("Qimage module for $pkgname" "SDL module for $pkgname" \
	"Jack modules for $pkgname")
subdepends=("libxi libstdc++>=6.2.1-5 libxrender qt5-base>=5.15.10 qt5-svg>=5.15.10" \
	"sdlimage" "jack>=0.118.0 libxml2>=2.9.4-3")
subrodepends=("$pkgname" "$pkgname" "$pkgname")
subgroups=('xmultimedia-extra' 'xmultimedia-extra' 'xmultimedia-extra')
subarchs=('x86_64' 'x86_64' 'x86_64')
subprovides=("$pkgname-qimage" '' '')
subreplaces=("${subprovides[@]}")
subconflicts=("${subprovides[@]}")

provides=("$pkgname-gtk2")
replaces=("$pkgname-gtk2")
conflicts=("$pkgname-gtk2")

build()
{
	CMake_build

 	Fsplit $pkgname-qt usr/lib/$pkgname-${pkgver%%.*}/libmltqt.so
 	Fsplit $pkgname-sdl usr/lib/$pkgname-${pkgver%%.*}/libmltsdl.so
 	Fsplit $pkgname-jack usr/lib/$pkgname-${pkgver%%.*}/libmltjackrack.so

}

# optimization OK
