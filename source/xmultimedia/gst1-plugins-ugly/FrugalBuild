# Compiling time: 0.19 SBU
# Maintainer: Baste <baste@frugalware.org>
# Contributor: bouleetbil <bouleetbil@frogdev.info>
# Contributor: AlexExtreme <alex@alex-smith.me.uk>

pkgname=gst1-plugins-ugly
_F_archive_name="gst-plugins-ugly"
pkgver=1.20.3
pkgrel=2
pkgdesc="Plugins for GStreamer (Ugly)"
url="http://gstreamer.freedesktop.org"
depends=('gst1-plugins-base>=1.20.3' 'gstreamer1>=1.20.3' 'orc>=0.4.24-2' 'libffi>=3.2.1-2')
makedepends=('pyxml>=0.8.4-8' 'x11-protos')
groups=('xmultimedia')
archs=("x86_64")
options+=('scriptlet')
_F_archive_grepv="1.15\|1.17\|1.19"
up2date="Flasttar $url/src/$_F_archive_name/"
source=($url/src/$_F_archive_name/$_F_archive_name-$pkgver.tar.xz)

subpkgs=("$pkgname-a52dec")
subdescs=('GStreamer a52dec plugin (Ugly).')
subdepends=("gst1-plugins-base>=1.20.3 libffi>=3.2.1-2 a52dec>=0.7.4-6")
subrodepends=("$pkgname>=$pkgver")
subgroups=('xmultimedia')
subarchs=("x86_64")

subpkgs+=("$pkgname-dvdread")
subdescs+=('GStreamer dvdread plugin (Ugly).')
subdepends+=("gst1-plugins-base>=1.20.3 libffi>=3.2.1-2 libdvdread>=6.1.1")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('x86_64')

subpkgs+=("$pkgname-mpeg2dec")
subdescs+=('GStreamer mpeg2dec plugin (Ugly).')
subdepends+=("gst1-plugins-base>=1.20.3 libffi>=3.2.1-2 mpeg2dec>=0.5.1-4")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('x86_64')

subpkgs+=("$pkgname-cdio")
subdescs+=('GStreamer cdio plugin (Ugly).')
subdepends+=("gst1-plugins-base>=1.20.3 libffi>=3.2.1-2 libcdio>=0.93-4")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('x86_64')

subpkgs+=("$pkgname-x264")
subdescs+=('GStreamer x264 plugin (Ugly).')
subdepends+=("gst1-plugins-base>=1.20.3 libffi>=3.2.1-2 x264>=20220903.gf7074e1")
subrodepends+=("$pkgname>=$pkgver")
subgroups+=('xmultimedia')
subarchs+=('x86_64')

_F_meson_confopts="     -Dpackage-name=Frugalware_gstreamer_plugis_ugly_package \
                        -Dpackage-origin=http://frugalware.org \
			-Dgpl=enabled"
Finclude meson

build()
{
	Meson_build

	Fsplit $pkgname-a52dec usr/lib/gstreamer-1.0/libgsta52dec.*
	Fsplit $pkgname-dvdread usr/lib/gstreamer-1.0/libgstdvdread.*
	Fsplit $pkgname-mpeg2dec usr/lib/gstreamer-1.0/libgstmpeg2dec.*
	Fsplit $pkgname-cdio usr/lib/gstreamer-1.0/libgstcdio.*
	Fsplit $pkgname-x264 usr/lib/gstreamer-1.0/libgstx264.*
}
sha1sums=('41bb622a05abb4d7f7c6b3f40f00dc5f1428422c')

# optimization OK
