# Compiling Time: 0.22 SBU
# Contributor: Kapolnasi Tamas <ktamas@tdc.hu>
# Maintainer: Cedrick Hannier alias Cedynamix <cedynamix@gmail.com>

pkgname=x264
pkgver=20100715
pkgrel=1
pkgdesc="A free h264/avc encoder"
url="http://developers.videolan.org/x264.html"
depends=('libx11>=1.3.3')
makedepends=('gpac>=0.4.5-2' 'yasm')
groups=('xmultimedia')
archs=('i686' 'x86_64' 'ppc')
up2date=$pkgver
source=(ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-$pkgver-2245.tar.bz2)
sha1sums=('d307e4ac8bf3b51827d2bc9f1489996c42de3488')

Fconfopts="$Fconfopts --enable-pthread \
                --enable-shared \
                --enable-mp4-output \
                --enable-visualize \
                --enable-pic"

if [ "$CARCH" == "ppc" ]; then
	export CFLAGS="$CFLAGS -flax-vector-conversions"
fi

build() {
	Fcd $pkgname-snapshot-$pkgver-2245/
	Fbuild
	Fmakeinstall bindir=/usr/bin libdir=/usr/lib includedir=/usr/include DESTDIR=$Fdestdir
}

# optimization OK
