#!/bin/bash

# (c) 2004-2005 Vajna Miklos <vmiklos@frugalware.org>
# genpkgdbs for Frugalware
# distributed under GPL License

# Changelog
echo -n "generating ChangeLog.txt..."
(cd .. && darcs changes --from-tag "0.3$" >ChangeLog.txt)
echo " done"

# Filelist.txt
echo -n "generating Filelist.txt..."
( cd ..
  echo -e "Last Modified: `LANG= LC_ALL= date`\n\nFrugalware Source Tree">Filelist.txt
  tree|grep -v ^\.$>>Filelist.txt )
echo " done"

# .fdbs
( cd ../
  arch=i686 gensync source/ frugalware-i686/frugalware-current.fdb
  arch=x86_64 gensync source/ frugalware-x86_64/frugalware-current.fdb )
( cd ../extra
  arch=i686 gensync source/ frugalware-i686/extra-current.fdb
  arch=x86_64 gensync source/ frugalware-x86_64/extra-current.fdb )

# fixing permsissions
echo -n "fixing permissions..."
./fixperms
echo " done"
